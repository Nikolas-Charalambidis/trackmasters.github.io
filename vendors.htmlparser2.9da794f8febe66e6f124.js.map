{"version":3,"sources":["webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/querying.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/tagtypes.js","webpack:///./node_modules/htmlparser2/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/stringify.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/foreignNames.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/traversal.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/manipulation.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/legacy.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/helpers.js","webpack:///./node_modules/htmlparser2/lib/Parser.js","webpack:///./node_modules/htmlparser2/lib/Tokenizer.js","webpack:///./node_modules/htmlparser2/lib/FeedHandler.js"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","defineProperty","enumerable","get","__exportStar","exports","p","prototype","hasOwnProperty","call","value","findAll","existsOne","findOne","findOneChild","find","filter","tagtypes_1","test","nodes","recurse","limit","result","_i","nodes_1","length","elem","push","hasChildren","children","apply","node","Infinity","Array","isArray","i","checked","isTag","some","_a","stack","shift","unshift","isComment","isText","isCDATA","domelementtype_1","type","__setModuleDefault","v","__importStar","mod","__esModule","__importDefault","RssHandler","DefaultHandler","DomUtils","ElementType","Tokenizer","createDomStream","parseDOM","DomHandler","Parser","Parser_1","domhandler_1","data","options","handler","end","dom","cb","elementCb","Tokenizer_1","default","FeedHandler_1","FeedHandler","getText","getInnerHTML","getOuterHTML","dom_serializer_1","map","join","name","__assign","assign","t","s","n","arguments","entities_1","foreignNames_1","unencodedElements","Set","singleTag","render","cheerio","output","renderNode","Root","Directive","Doctype","Comment","renderComment","CDATA","renderCdata","Script","Style","Tag","opts","xmlMode","elementNames","parent","foreignModeIntegrationPoints","has","foreignElements","tag","attribs","attributes","keys","key","_b","attributeNames","emptyAttrs","decodeEntities","encodeXML","replace","formatAttributes","selfClosingTags","renderTag","Text","renderText","Map","nextElementSibling","getName","hasAttrib","getAttributeValue","getSiblings","getParent","getChildren","emptyArray","siblings","prev","next","removeElement","childs","splice","lastIndexOf","prepend","prependChild","append","appendChild","replaceElement","replacement","child","sibling","currNext","indexOf","getElementsByTagType","getElementsByTagName","getElementById","getElements","testElement","querying_1","Checks","tag_name","tag_type","tag_contains","getAttribCheck","attrib","combineFuncs","a","b","compileTest","funcs","reduce","id","tagName","uniqueSort","compareDocumentPosition","removeSubsets","nodeA","nodeB","aParents","bParents","current","maxIdx","Math","min","idx","sharedParent","aSibling","bSibling","ancestor","includes","arr","sort","relative","formTags","pTag","openImpliesClose","tr","th","td","body","li","h1","h2","h3","h4","h5","h6","select","input","button","datalist","textarea","option","optgroup","dd","dt","address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","header","hr","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","_c","_d","_e","startIndex","endIndex","tagname","attribname","attribvalue","foreignContext","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","onparserinit","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","ontext","onopentagname","toLowerCase","el","onclosetag","onopentag","onopentagend","pop","closeCurrentTag","pos","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","quote","onattribute","getInstructionName","search","substr","ondeclaration","onprocessinginstruction","name_1","name_2","oncomment","oncommentend","oncdata","_f","recognizeCDATA","oncdatastart","oncdataend","onerror","err","onend","reset","onreset","parseComplete","write","chunk","pause","resume","parseChunk","done","decode_codepoint_1","entities_json_1","legacy_json_1","xml_json_1","whitespace","c","isASCIIAlpha","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","buffer","bufferOffset","baseState","special","running","ended","Error","parse","finish","stateText","getSection","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","stateInSelfClosingTag","stateInAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","handleInAttributeValue","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","stateInProcessingInstruction","stateBeforeComment","stateInComment","stateInSpecialComment","substring","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","entity","emitPartial","parseLegacyEntity","start","stateInNamedEntity","decodeNumericEntity","offset","base","strict","parsed","parseInt","stateInNumericEntity","stateInHexEntity","cleanup","charAt","handleTrailingData","extendStatics","__extends","d","setPrototypeOf","__proto__","__","constructor","parseFeed","FeedItemMediaMedium","FeedItemMediaExpression","_super","callback","feed","feedRoot","getOneElement","isValidFeed","addConditionally","href","getAttribute","link","updated","fetch","Date","items","item","entry","description","pubDate","media","getMediaElements","handleCallback","where","medium","isDefault","url","fileSize","expression","bitrate","framerate","samplingrate","channels","duration","height","width","lang","trim","obj","prop","what","tmp","defaultOptions"],"mappings":"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","file":"vendors.htmlparser2.9da794f8febe66e6f124.js","sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./stringify\"), exports);\n__exportStar(require(\"./traversal\"), exports);\n__exportStar(require(\"./manipulation\"), exports);\n__exportStar(require(\"./querying\"), exports);\n__exportStar(require(\"./legacy\"), exports);\n__exportStar(require(\"./helpers\"), exports);\n__exportStar(require(\"./tagtypes\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAll = exports.existsOne = exports.findOne = exports.findOneChild = exports.find = exports.filter = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Search a node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param node Node to search. Will be included in the result set if it matches.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction filter(test, node, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    if (!Array.isArray(node))\n        node = [node];\n    return find(test, node, recurse, limit);\n}\nexports.filter = filter;\n/**\n * Search an array of node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction find(test, nodes, recurse, limit) {\n    var result = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var elem = nodes_1[_i];\n        if (test(elem)) {\n            result.push(elem);\n            if (--limit <= 0)\n                break;\n        }\n        if (recurse && tagtypes_1.hasChildren(elem) && elem.children.length > 0) {\n            var children = find(test, elem.children, recurse, limit);\n            result.push.apply(result, children);\n            limit -= children.length;\n            if (limit <= 0)\n                break;\n        }\n    }\n    return result;\n}\nexports.find = find;\n/**\n * Finds the first element inside of an array that matches a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns The first node in the array that passes `test`.\n */\nfunction findOneChild(test, nodes) {\n    return nodes.find(test);\n}\nexports.findOneChild = findOneChild;\n/**\n * Finds one element in a tree that passes a test.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @returns The first child node that passes `test`.\n */\nfunction findOne(test, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var elem = null;\n    for (var i = 0; i < nodes.length && !elem; i++) {\n        var checked = nodes[i];\n        if (!tagtypes_1.isTag(checked)) {\n            continue;\n        }\n        else if (test(checked)) {\n            elem = checked;\n        }\n        else if (recurse && checked.children.length > 0) {\n            elem = findOne(test, checked.children);\n        }\n    }\n    return elem;\n}\nexports.findOne = findOne;\n/**\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns Whether a tree of nodes contains at least one node passing a test.\n */\nfunction existsOne(test, nodes) {\n    return nodes.some(function (checked) {\n        return tagtypes_1.isTag(checked) &&\n            (test(checked) ||\n                (checked.children.length > 0 &&\n                    existsOne(test, checked.children)));\n    });\n}\nexports.existsOne = existsOne;\n/**\n * Search and array of nodes and its children for nodes passing a test function.\n *\n * Same as `find`, only with less options, leading to reduced complexity.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns All nodes passing `test`.\n */\nfunction findAll(test, nodes) {\n    var _a;\n    var result = [];\n    var stack = nodes.filter(tagtypes_1.isTag);\n    var elem;\n    while ((elem = stack.shift())) {\n        var children = (_a = elem.children) === null || _a === void 0 ? void 0 : _a.filter(tagtypes_1.isTag);\n        if (children && children.length > 0) {\n            stack.unshift.apply(stack, children);\n        }\n        if (test(elem))\n            result.push(elem);\n    }\n    return result;\n}\nexports.findAll = findAll;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasChildren = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nfunction isTag(node) {\n    return domelementtype_1.isTag(node);\n}\nexports.isTag = isTag;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren`, `false` otherwise.\n */\nfunction isCDATA(node) {\n    return node.type === \"cdata\" /* CDATA */;\n}\nexports.isCDATA = isCDATA;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isText(node) {\n    return node.type === \"text\" /* Text */;\n}\nexports.isText = isText;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isComment(node) {\n    return node.type === \"comment\" /* Comment */;\n}\nexports.isComment = isComment;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren` (has children), `false` otherwise.\n */\nfunction hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\nexports.hasChildren = hasChildren;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RssHandler = exports.DefaultHandler = exports.DomUtils = exports.ElementType = exports.Tokenizer = exports.createDomStream = exports.parseDOM = exports.DomHandler = exports.Parser = void 0;\nvar Parser_1 = require(\"./Parser\");\nObject.defineProperty(exports, \"Parser\", { enumerable: true, get: function () { return Parser_1.Parser; } });\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"DomHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\nObject.defineProperty(exports, \"DefaultHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\n// Helper methods\n/**\n * Parses data, returns the resulting DOM.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nfunction parseDOM(data, options) {\n    var handler = new domhandler_1.DomHandler(void 0, options);\n    new Parser_1.Parser(handler, options).end(data);\n    return handler.dom;\n}\nexports.parseDOM = parseDOM;\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param cb A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCb An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nfunction createDomStream(cb, options, elementCb) {\n    var handler = new domhandler_1.DomHandler(cb, options, elementCb);\n    return new Parser_1.Parser(handler, options);\n}\nexports.createDomStream = createDomStream;\nvar Tokenizer_1 = require(\"./Tokenizer\");\nObject.defineProperty(exports, \"Tokenizer\", { enumerable: true, get: function () { return __importDefault(Tokenizer_1).default; } });\nvar ElementType = __importStar(require(\"domelementtype\"));\nexports.ElementType = ElementType;\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\n__exportStar(require(\"./FeedHandler\"), exports);\nexports.DomUtils = __importStar(require(\"domutils\"));\nvar FeedHandler_1 = require(\"./FeedHandler\");\nObject.defineProperty(exports, \"RssHandler\", { enumerable: true, get: function () { return FeedHandler_1.FeedHandler; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getText = exports.getInnerHTML = exports.getOuterHTML = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar dom_serializer_1 = __importDefault(require(\"dom-serializer\"));\n/**\n * @param node Node to get the outer HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s outer HTML.\n */\nfunction getOuterHTML(node, options) {\n    return dom_serializer_1.default(node, options);\n}\nexports.getOuterHTML = getOuterHTML;\n/**\n * @param node Node to get the inner HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s inner HTML.\n */\nfunction getInnerHTML(node, options) {\n    return tagtypes_1.hasChildren(node)\n        ? node.children.map(function (node) { return getOuterHTML(node, options); }).join(\"\")\n        : \"\";\n}\nexports.getInnerHTML = getInnerHTML;\n/**\n * Get a node's inner text.\n *\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n */\nfunction getText(node) {\n    if (Array.isArray(node))\n        return node.map(getText).join(\"\");\n    if (tagtypes_1.isTag(node))\n        return node.name === \"br\" ? \"\\n\" : getText(node.children);\n    if (tagtypes_1.isCDATA(node))\n        return getText(node.children);\n    if (tagtypes_1.isText(node))\n        return node.data;\n    return \"\";\n}\nexports.getText = getText;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies\n */\nvar ElementType = __importStar(require(\"domelementtype\"));\nvar entities_1 = require(\"entities\");\n/*\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser, see\n * https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nvar foreignNames_1 = require(\"./foreignNames\");\nvar unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    if (!attributes)\n        return;\n    return Object.keys(attributes)\n        .map(function (key) {\n        var _a, _b;\n        var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return key + \"=\\\"\" + (opts.decodeEntities ? entities_1.encodeXML(value) : value.replace(/\"/g, \"&quot;\")) + \"\\\"\";\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nvar singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nfunction render(node, options) {\n    if (options === void 0) { options = {}; }\n    // TODO: This is a bit hacky.\n    var nodes = Array.isArray(node) || node.cheerio ? node : [node];\n    var output = \"\";\n    for (var i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexports.default = render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        case ElementType.Directive:\n        case ElementType.Doctype:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nvar foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = __assign(__assign({}, opts), { xmlMode: false });\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = __assign(__assign({}, opts), { xmlMode: \"foreign\" });\n    }\n    var tag = \"<\" + elem.name;\n    var attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += \" \" + attribs;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += \"</\" + elem.name + \">\";\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return \"<\" + elem.data + \">\";\n}\nfunction renderText(elem, opts) {\n    var data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (opts.decodeEntities &&\n        !(elem.parent && unencodedElements.has(elem.parent.name))) {\n        data = entities_1.encodeXML(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return \"<![CDATA[\" + elem.children[0].data + \"]]>\";\n}\nfunction renderComment(elem) {\n    return \"<!--\" + elem.data + \"-->\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attributeNames = exports.elementNames = void 0;\nexports.elementNames = new Map([\n    [\"altglyph\", \"altGlyph\"],\n    [\"altglyphdef\", \"altGlyphDef\"],\n    [\"altglyphitem\", \"altGlyphItem\"],\n    [\"animatecolor\", \"animateColor\"],\n    [\"animatemotion\", \"animateMotion\"],\n    [\"animatetransform\", \"animateTransform\"],\n    [\"clippath\", \"clipPath\"],\n    [\"feblend\", \"feBlend\"],\n    [\"fecolormatrix\", \"feColorMatrix\"],\n    [\"fecomponenttransfer\", \"feComponentTransfer\"],\n    [\"fecomposite\", \"feComposite\"],\n    [\"feconvolvematrix\", \"feConvolveMatrix\"],\n    [\"fediffuselighting\", \"feDiffuseLighting\"],\n    [\"fedisplacementmap\", \"feDisplacementMap\"],\n    [\"fedistantlight\", \"feDistantLight\"],\n    [\"fedropshadow\", \"feDropShadow\"],\n    [\"feflood\", \"feFlood\"],\n    [\"fefunca\", \"feFuncA\"],\n    [\"fefuncb\", \"feFuncB\"],\n    [\"fefuncg\", \"feFuncG\"],\n    [\"fefuncr\", \"feFuncR\"],\n    [\"fegaussianblur\", \"feGaussianBlur\"],\n    [\"feimage\", \"feImage\"],\n    [\"femerge\", \"feMerge\"],\n    [\"femergenode\", \"feMergeNode\"],\n    [\"femorphology\", \"feMorphology\"],\n    [\"feoffset\", \"feOffset\"],\n    [\"fepointlight\", \"fePointLight\"],\n    [\"fespecularlighting\", \"feSpecularLighting\"],\n    [\"fespotlight\", \"feSpotLight\"],\n    [\"fetile\", \"feTile\"],\n    [\"feturbulence\", \"feTurbulence\"],\n    [\"foreignobject\", \"foreignObject\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"lineargradient\", \"linearGradient\"],\n    [\"radialgradient\", \"radialGradient\"],\n    [\"textpath\", \"textPath\"],\n]);\nexports.attributeNames = new Map([\n    [\"definitionurl\", \"definitionURL\"],\n    [\"attributename\", \"attributeName\"],\n    [\"attributetype\", \"attributeType\"],\n    [\"basefrequency\", \"baseFrequency\"],\n    [\"baseprofile\", \"baseProfile\"],\n    [\"calcmode\", \"calcMode\"],\n    [\"clippathunits\", \"clipPathUnits\"],\n    [\"diffuseconstant\", \"diffuseConstant\"],\n    [\"edgemode\", \"edgeMode\"],\n    [\"filterunits\", \"filterUnits\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"gradienttransform\", \"gradientTransform\"],\n    [\"gradientunits\", \"gradientUnits\"],\n    [\"kernelmatrix\", \"kernelMatrix\"],\n    [\"kernelunitlength\", \"kernelUnitLength\"],\n    [\"keypoints\", \"keyPoints\"],\n    [\"keysplines\", \"keySplines\"],\n    [\"keytimes\", \"keyTimes\"],\n    [\"lengthadjust\", \"lengthAdjust\"],\n    [\"limitingconeangle\", \"limitingConeAngle\"],\n    [\"markerheight\", \"markerHeight\"],\n    [\"markerunits\", \"markerUnits\"],\n    [\"markerwidth\", \"markerWidth\"],\n    [\"maskcontentunits\", \"maskContentUnits\"],\n    [\"maskunits\", \"maskUnits\"],\n    [\"numoctaves\", \"numOctaves\"],\n    [\"pathlength\", \"pathLength\"],\n    [\"patterncontentunits\", \"patternContentUnits\"],\n    [\"patterntransform\", \"patternTransform\"],\n    [\"patternunits\", \"patternUnits\"],\n    [\"pointsatx\", \"pointsAtX\"],\n    [\"pointsaty\", \"pointsAtY\"],\n    [\"pointsatz\", \"pointsAtZ\"],\n    [\"preservealpha\", \"preserveAlpha\"],\n    [\"preserveaspectratio\", \"preserveAspectRatio\"],\n    [\"primitiveunits\", \"primitiveUnits\"],\n    [\"refx\", \"refX\"],\n    [\"refy\", \"refY\"],\n    [\"repeatcount\", \"repeatCount\"],\n    [\"repeatdur\", \"repeatDur\"],\n    [\"requiredextensions\", \"requiredExtensions\"],\n    [\"requiredfeatures\", \"requiredFeatures\"],\n    [\"specularconstant\", \"specularConstant\"],\n    [\"specularexponent\", \"specularExponent\"],\n    [\"spreadmethod\", \"spreadMethod\"],\n    [\"startoffset\", \"startOffset\"],\n    [\"stddeviation\", \"stdDeviation\"],\n    [\"stitchtiles\", \"stitchTiles\"],\n    [\"surfacescale\", \"surfaceScale\"],\n    [\"systemlanguage\", \"systemLanguage\"],\n    [\"tablevalues\", \"tableValues\"],\n    [\"targetx\", \"targetX\"],\n    [\"targety\", \"targetY\"],\n    [\"textlength\", \"textLength\"],\n    [\"viewbox\", \"viewBox\"],\n    [\"viewtarget\", \"viewTarget\"],\n    [\"xchannelselector\", \"xChannelSelector\"],\n    [\"ychannelselector\", \"yChannelSelector\"],\n    [\"zoomandpan\", \"zoomAndPan\"],\n]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nextElementSibling = exports.getName = exports.hasAttrib = exports.getAttributeValue = exports.getSiblings = exports.getParent = exports.getChildren = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar emptyArray = [];\n/**\n * Get a node's children.\n *\n * @param elem Node to get the children of.\n * @returns `elem`'s children, or an empty array.\n */\nfunction getChildren(elem) {\n    var _a;\n    return (_a = elem.children) !== null && _a !== void 0 ? _a : emptyArray;\n}\nexports.getChildren = getChildren;\n/**\n * Get a node's parent.\n *\n * @param elem Node to get the parent of.\n * @returns `elem`'s parent node.\n */\nfunction getParent(elem) {\n    return elem.parent || null;\n}\nexports.getParent = getParent;\n/**\n * Gets an elements siblings, including the element itself.\n *\n * Attempts to get the children through the element's parent first.\n * If we don't have a parent (the element is a root node),\n * we walk the element's `prev` & `next` to get all remaining nodes.\n *\n * @param elem Element to get the siblings of.\n * @returns `elem`'s siblings.\n */\nfunction getSiblings(elem) {\n    var _a, _b;\n    var parent = getParent(elem);\n    if (parent != null)\n        return getChildren(parent);\n    var siblings = [elem];\n    var prev = elem.prev, next = elem.next;\n    while (prev != null) {\n        siblings.unshift(prev);\n        (_a = prev, prev = _a.prev);\n    }\n    while (next != null) {\n        siblings.push(next);\n        (_b = next, next = _b.next);\n    }\n    return siblings;\n}\nexports.getSiblings = getSiblings;\n/**\n * Gets an attribute from an element.\n *\n * @param elem Element to check.\n * @param name Attribute name to retrieve.\n * @returns The element's attribute value, or `undefined`.\n */\nfunction getAttributeValue(elem, name) {\n    var _a;\n    return (_a = elem.attribs) === null || _a === void 0 ? void 0 : _a[name];\n}\nexports.getAttributeValue = getAttributeValue;\n/**\n * Checks whether an element has an attribute.\n *\n * @param elem Element to check.\n * @param name Attribute name to look for.\n * @returns Returns whether `elem` has the attribute `name`.\n */\nfunction hasAttrib(elem, name) {\n    return (elem.attribs != null &&\n        Object.prototype.hasOwnProperty.call(elem.attribs, name) &&\n        elem.attribs[name] != null);\n}\nexports.hasAttrib = hasAttrib;\n/**\n * Get the tag name of an element.\n *\n * @param elem The element to get the name for.\n * @returns The tag name of `elem`.\n */\nfunction getName(elem) {\n    return elem.name;\n}\nexports.getName = getName;\n/**\n * Returns the next element sibling of a node.\n *\n * @param elem The element to get the next sibling of.\n * @returns `elem`'s next sibling that is a tag.\n */\nfunction nextElementSibling(elem) {\n    var _a;\n    var next = elem.next;\n    while (next !== null && !tagtypes_1.isTag(next))\n        (_a = next, next = _a.next);\n    return next;\n}\nexports.nextElementSibling = nextElementSibling;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepend = exports.prependChild = exports.append = exports.appendChild = exports.replaceElement = exports.removeElement = void 0;\n/**\n * Remove an element from the dom\n *\n * @param elem The element to be removed\n */\nfunction removeElement(elem) {\n    if (elem.prev)\n        elem.prev.next = elem.next;\n    if (elem.next)\n        elem.next.prev = elem.prev;\n    if (elem.parent) {\n        var childs = elem.parent.children;\n        childs.splice(childs.lastIndexOf(elem), 1);\n    }\n}\nexports.removeElement = removeElement;\n/**\n * Replace an element in the dom\n *\n * @param elem The element to be replaced\n * @param replacement The element to be added\n */\nfunction replaceElement(elem, replacement) {\n    var prev = (replacement.prev = elem.prev);\n    if (prev) {\n        prev.next = replacement;\n    }\n    var next = (replacement.next = elem.next);\n    if (next) {\n        next.prev = replacement;\n    }\n    var parent = (replacement.parent = elem.parent);\n    if (parent) {\n        var childs = parent.children;\n        childs[childs.lastIndexOf(elem)] = replacement;\n    }\n}\nexports.replaceElement = replaceElement;\n/**\n * Append a child to an element.\n *\n * @param elem The element to append to.\n * @param child The element to be added as a child.\n */\nfunction appendChild(elem, child) {\n    removeElement(child);\n    child.next = null;\n    child.parent = elem;\n    if (elem.children.push(child) > 1) {\n        var sibling = elem.children[elem.children.length - 2];\n        sibling.next = child;\n        child.prev = sibling;\n    }\n    else {\n        child.prev = null;\n    }\n}\nexports.appendChild = appendChild;\n/**\n * Append an element after another.\n *\n * @param elem The element to append after.\n * @param next The element be added.\n */\nfunction append(elem, next) {\n    removeElement(next);\n    var parent = elem.parent;\n    var currNext = elem.next;\n    next.next = currNext;\n    next.prev = elem;\n    elem.next = next;\n    next.parent = parent;\n    if (currNext) {\n        currNext.prev = next;\n        if (parent) {\n            var childs = parent.children;\n            childs.splice(childs.lastIndexOf(currNext), 0, next);\n        }\n    }\n    else if (parent) {\n        parent.children.push(next);\n    }\n}\nexports.append = append;\n/**\n * Prepend a child to an element.\n *\n * @param elem The element to prepend before.\n * @param child The element to be added as a child.\n */\nfunction prependChild(elem, child) {\n    removeElement(child);\n    child.parent = elem;\n    child.prev = null;\n    if (elem.children.unshift(child) !== 1) {\n        var sibling = elem.children[1];\n        sibling.prev = child;\n        child.next = sibling;\n    }\n    else {\n        child.next = null;\n    }\n}\nexports.prependChild = prependChild;\n/**\n * Prepend an element before another.\n *\n * @param elem The element to prepend before.\n * @param prev The element be added.\n */\nfunction prepend(elem, prev) {\n    removeElement(prev);\n    var parent = elem.parent;\n    if (parent) {\n        var childs = parent.children;\n        childs.splice(childs.indexOf(elem), 0, prev);\n    }\n    if (elem.prev) {\n        elem.prev.next = prev;\n    }\n    prev.parent = parent;\n    prev.prev = elem.prev;\n    prev.next = elem;\n    elem.prev = prev;\n}\nexports.prepend = prepend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementsByTagType = exports.getElementsByTagName = exports.getElementById = exports.getElements = exports.testElement = void 0;\nvar querying_1 = require(\"./querying\");\nvar tagtypes_1 = require(\"./tagtypes\");\nvar Checks = {\n    tag_name: function (name) {\n        if (typeof name === \"function\") {\n            return function (elem) { return tagtypes_1.isTag(elem) && name(elem.name); };\n        }\n        else if (name === \"*\") {\n            return tagtypes_1.isTag;\n        }\n        return function (elem) { return tagtypes_1.isTag(elem) && elem.name === name; };\n    },\n    tag_type: function (type) {\n        if (typeof type === \"function\") {\n            return function (elem) { return type(elem.type); };\n        }\n        return function (elem) { return elem.type === type; };\n    },\n    tag_contains: function (data) {\n        if (typeof data === \"function\") {\n            return function (elem) { return tagtypes_1.isText(elem) && data(elem.data); };\n        }\n        return function (elem) { return tagtypes_1.isText(elem) && elem.data === data; };\n    },\n};\n/**\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a particular value.\n */\nfunction getAttribCheck(attrib, value) {\n    if (typeof value === \"function\") {\n        return function (elem) { return tagtypes_1.isTag(elem) && value(elem.attribs[attrib]); };\n    }\n    return function (elem) { return tagtypes_1.isTag(elem) && elem.attribs[attrib] === value; };\n}\n/**\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either\n * of the input functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n    return function (elem) { return a(elem) || b(elem); };\n}\n/**\n * @param options An object describing nodes to look for.\n * @returns A function executing all checks in `options` and returning `true`\n * if any of them match a node.\n */\nfunction compileTest(options) {\n    var funcs = Object.keys(options).map(function (key) {\n        var value = options[key];\n        return key in Checks\n            ? Checks[key](value)\n            : getAttribCheck(key, value);\n    });\n    return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n    var test = compileTest(options);\n    return test ? test(node) : true;\n}\nexports.testElement = testElement;\n/**\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var test = compileTest(options);\n    return test ? querying_1.filter(test, nodes, recurse, limit) : [];\n}\nexports.getElements = getElements;\n/**\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    if (!Array.isArray(nodes))\n        nodes = [nodes];\n    return querying_1.findOne(getAttribCheck(\"id\", id), nodes, recurse);\n}\nexports.getElementById = getElementById;\n/**\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_name(tagName), nodes, recurse, limit);\n}\nexports.getElementsByTagName = getElementsByTagName;\n/**\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_type(type), nodes, recurse, limit);\n}\nexports.getElementsByTagType = getElementsByTagType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uniqueSort = exports.compareDocumentPosition = exports.removeSubsets = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Given an array of nodes, remove any member that is contained by another.\n *\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't subtrees of each other.\n */\nfunction removeSubsets(nodes) {\n    var idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        var node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (var ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\nexports.removeSubsets = removeSubsets;\n/**\n * Compare the position of one node against another node in any other document.\n * The return value is a bitmask with the following values:\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent./\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nfunction compareDocumentPosition(nodeA, nodeB) {\n    var aParents = [];\n    var bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    var current = tagtypes_1.hasChildren(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = tagtypes_1.hasChildren(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    var maxIdx = Math.min(aParents.length, bParents.length);\n    var idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return 1 /* DISCONNECTED */;\n    }\n    var sharedParent = aParents[idx - 1];\n    var siblings = sharedParent.children;\n    var aSibling = aParents[idx];\n    var bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return 4 /* FOLLOWING */ | 16 /* CONTAINED_BY */;\n        }\n        return 4 /* FOLLOWING */;\n    }\n    if (sharedParent === nodeA) {\n        return 2 /* PRECEDING */ | 8 /* CONTAINS */;\n    }\n    return 2 /* PRECEDING */;\n}\nexports.compareDocumentPosition = compareDocumentPosition;\n/**\n * Sort an array of nodes based on their relative position in the document and\n * remove any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nfunction uniqueSort(nodes) {\n    nodes = nodes.filter(function (node, i, arr) { return !arr.includes(node, i + 1); });\n    nodes.sort(function (a, b) {\n        var relative = compareDocumentPosition(a, b);\n        if (relative & 2 /* PRECEDING */) {\n            return -1;\n        }\n        else if (relative & 4 /* FOLLOWING */) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\nexports.uniqueSort = uniqueSort;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames = (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Parses a complete document and pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (c === \"s\" || c === \"S\") {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (c === \"t\" || c === \"T\") {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFeed = exports.FeedHandler = void 0;\nvar domhandler_1 = __importDefault(require(\"domhandler\"));\nvar DomUtils = __importStar(require(\"domutils\"));\nvar Parser_1 = require(\"./Parser\");\nvar FeedItemMediaMedium;\n(function (FeedItemMediaMedium) {\n    FeedItemMediaMedium[FeedItemMediaMedium[\"image\"] = 0] = \"image\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"audio\"] = 1] = \"audio\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"video\"] = 2] = \"video\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"document\"] = 3] = \"document\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"executable\"] = 4] = \"executable\";\n})(FeedItemMediaMedium || (FeedItemMediaMedium = {}));\nvar FeedItemMediaExpression;\n(function (FeedItemMediaExpression) {\n    FeedItemMediaExpression[FeedItemMediaExpression[\"sample\"] = 0] = \"sample\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"full\"] = 1] = \"full\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"nonstop\"] = 2] = \"nonstop\";\n})(FeedItemMediaExpression || (FeedItemMediaExpression = {}));\n// TODO: Consume data as it is coming in\nvar FeedHandler = /** @class */ (function (_super) {\n    __extends(FeedHandler, _super);\n    /**\n     *\n     * @param callback\n     * @param options\n     */\n    function FeedHandler(callback, options) {\n        var _this = this;\n        if (typeof callback === \"object\") {\n            callback = undefined;\n            options = callback;\n        }\n        _this = _super.call(this, callback, options) || this;\n        return _this;\n    }\n    FeedHandler.prototype.onend = function () {\n        var _a, _b;\n        var feed = {};\n        var feedRoot = getOneElement(isValidFeed, this.dom);\n        if (feedRoot) {\n            if (feedRoot.name === \"feed\") {\n                var childs = feedRoot.children;\n                feed.type = \"atom\";\n                addConditionally(feed, \"id\", \"id\", childs);\n                addConditionally(feed, \"title\", \"title\", childs);\n                var href = getAttribute(\"href\", getOneElement(\"link\", childs));\n                if (href) {\n                    feed.link = href;\n                }\n                addConditionally(feed, \"description\", \"subtitle\", childs);\n                var updated = fetch(\"updated\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"email\", childs, true);\n                feed.items = getElements(\"entry\", childs).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"id\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    var href = getAttribute(\"href\", getOneElement(\"link\", children));\n                    if (href) {\n                        entry.link = href;\n                    }\n                    var description = fetch(\"summary\", children) ||\n                        fetch(\"content\", children);\n                    if (description) {\n                        entry.description = description;\n                    }\n                    var pubDate = fetch(\"updated\", children);\n                    if (pubDate) {\n                        entry.pubDate = new Date(pubDate);\n                    }\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n            else {\n                var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n                feed.type = feedRoot.name.substr(0, 3);\n                feed.id = \"\";\n                addConditionally(feed, \"title\", \"title\", childs);\n                addConditionally(feed, \"link\", \"link\", childs);\n                addConditionally(feed, \"description\", \"description\", childs);\n                var updated = fetch(\"lastBuildDate\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n                feed.items = getElements(\"item\", feedRoot.children).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"guid\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    addConditionally(entry, \"link\", \"link\", children);\n                    addConditionally(entry, \"description\", \"description\", children);\n                    var pubDate = fetch(\"pubDate\", children);\n                    if (pubDate)\n                        entry.pubDate = new Date(pubDate);\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n        }\n        this.feed = feed;\n        this.handleCallback(feedRoot ? null : Error(\"couldn't find root of feed\"));\n    };\n    return FeedHandler;\n}(domhandler_1.default));\nexports.FeedHandler = FeedHandler;\nfunction getMediaElements(where) {\n    return getElements(\"media:content\", where).map(function (elem) {\n        var media = {\n            medium: elem.attribs.medium,\n            isDefault: !!elem.attribs.isDefault,\n        };\n        if (elem.attribs.url) {\n            media.url = elem.attribs.url;\n        }\n        if (elem.attribs.fileSize) {\n            media.fileSize = parseInt(elem.attribs.fileSize, 10);\n        }\n        if (elem.attribs.type) {\n            media.type = elem.attribs.type;\n        }\n        if (elem.attribs.expression) {\n            media.expression = elem.attribs\n                .expression;\n        }\n        if (elem.attribs.bitrate) {\n            media.bitrate = parseInt(elem.attribs.bitrate, 10);\n        }\n        if (elem.attribs.framerate) {\n            media.framerate = parseInt(elem.attribs.framerate, 10);\n        }\n        if (elem.attribs.samplingrate) {\n            media.samplingrate = parseInt(elem.attribs.samplingrate, 10);\n        }\n        if (elem.attribs.channels) {\n            media.channels = parseInt(elem.attribs.channels, 10);\n        }\n        if (elem.attribs.duration) {\n            media.duration = parseInt(elem.attribs.duration, 10);\n        }\n        if (elem.attribs.height) {\n            media.height = parseInt(elem.attribs.height, 10);\n        }\n        if (elem.attribs.width) {\n            media.width = parseInt(elem.attribs.width, 10);\n        }\n        if (elem.attribs.lang) {\n            media.lang = elem.attribs.lang;\n        }\n        return media;\n    });\n}\nfunction getElements(tagName, where) {\n    return DomUtils.getElementsByTagName(tagName, where, true);\n}\nfunction getOneElement(tagName, node) {\n    return DomUtils.getElementsByTagName(tagName, node, true, 1)[0];\n}\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return DomUtils.getText(DomUtils.getElementsByTagName(tagName, where, recurse, 1)).trim();\n}\nfunction getAttribute(name, elem) {\n    if (!elem) {\n        return null;\n    }\n    var attribs = elem.attribs;\n    return attribs[name];\n}\nfunction addConditionally(obj, prop, what, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var tmp = fetch(what, where, recurse);\n    if (tmp)\n        obj[prop] = tmp;\n}\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\nvar defaultOptions = { xmlMode: true };\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this option, you probably want to set `xmlMode` to `true`.\n */\nfunction parseFeed(feed, options) {\n    if (options === void 0) { options = defaultOptions; }\n    var handler = new FeedHandler(options);\n    new Parser_1.Parser(handler, options).end(feed);\n    return handler.feed;\n}\nexports.parseFeed = parseFeed;\n"],"sourceRoot":""}