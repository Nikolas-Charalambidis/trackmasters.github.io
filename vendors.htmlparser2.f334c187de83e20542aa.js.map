{"version":3,"sources":["webpack:///./node_modules/htmlparser2/lib/FeedHandler.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/querying.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/tagtypes.js","webpack:///./node_modules/htmlparser2/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/stringify.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/index.js","webpack:///./node_modules/htmlparser2/node_modules/dom-serializer/lib/foreignNames.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/traversal.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/manipulation.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/legacy.js","webpack:///./node_modules/htmlparser2/node_modules/domutils/lib/helpers.js","webpack:///./node_modules/htmlparser2/lib/Parser.js","webpack:///./node_modules/htmlparser2/lib/Tokenizer.js"],"names":["extendStatics","__extends","this","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","__createBinding","o","m","k","k2","undefined","defineProperty","enumerable","get","__setModuleDefault","v","value","__importStar","mod","__esModule","result","__importDefault","exports","parseFeed","FeedHandler","FeedItemMediaMedium","FeedItemMediaExpression","domhandler_1","DomUtils","Parser_1","_super","callback","options","onend","_a","_b","feed","feedRoot","getOneElement","isValidFeed","dom","name","childs","children","type","addConditionally","href","getAttribute","link","updated","fetch","Date","items","getElements","map","item","entry","description","pubDate","media","getMediaElements","substr","id","handleCallback","Error","default","where","elem","medium","attribs","isDefault","url","fileSize","parseInt","expression","bitrate","framerate","samplingrate","channels","duration","height","width","lang","tagName","getElementsByTagName","node","recurse","getText","trim","obj","prop","what","tmp","defaultOptions","xmlMode","handler","Parser","end","__exportStar","findAll","existsOne","findOne","findOneChild","find","filter","tagtypes_1","test","nodes","limit","_i","nodes_1","length","push","hasChildren","apply","Infinity","isArray","i","checked","isTag","some","stack","shift","unshift","isComment","isText","isCDATA","domelementtype_1","RssHandler","DefaultHandler","ElementType","Tokenizer","createDomStream","parseDOM","DomHandler","data","cb","elementCb","Tokenizer_1","FeedHandler_1","getInnerHTML","getOuterHTML","dom_serializer_1","join","__assign","assign","t","s","n","arguments","entities_1","foreignNames_1","unencodedElements","Set","singleTag","render","cheerio","output","renderNode","Root","Directive","Doctype","Comment","renderComment","CDATA","renderCdata","Script","Style","Tag","opts","elementNames","parent","foreignModeIntegrationPoints","has","foreignElements","tag","attributes","keys","key","attributeNames","emptyAttrs","decodeEntities","encodeXML","replace","formatAttributes","selfClosingTags","renderTag","Text","renderText","Map","nextElementSibling","getName","hasAttrib","getAttributeValue","getSiblings","getParent","getChildren","emptyArray","siblings","prev","next","removeElement","splice","lastIndexOf","prepend","prependChild","append","appendChild","replaceElement","replacement","child","sibling","currNext","indexOf","getElementsByTagType","getElementById","testElement","querying_1","Checks","tag_name","tag_type","tag_contains","getAttribCheck","attrib","combineFuncs","a","compileTest","funcs","reduce","uniqueSort","compareDocumentPosition","removeSubsets","nodeA","nodeB","aParents","bParents","current","maxIdx","Math","min","idx","sharedParent","aSibling","bSibling","ancestor","includes","arr","sort","relative","formTags","pTag","openImpliesClose","tr","th","td","body","li","h1","h2","h3","h4","h5","h6","select","input","button","datalist","textarea","option","optgroup","dd","dt","address","article","aside","blockquote","details","div","dl","fieldset","figcaption","figure","footer","form","header","hr","main","nav","ol","pre","section","table","ul","rt","rp","tbody","tfoot","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","cbs","_c","_d","_e","startIndex","endIndex","tagname","attribname","attribvalue","foreignContext","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","onparserinit","updatePosition","initialOffset","sectionStart","getAbsoluteIndex","ontext","onopentagname","toLowerCase","el","onclosetag","onopentag","onopentagend","pop","closeCurrentTag","pos","onselfclosingtag","recognizeSelfClosing","onattribname","onattribdata","onattribend","quote","onattribute","getInstructionName","search","ondeclaration","onprocessinginstruction","name_1","name_2","oncomment","oncommentend","oncdata","_f","recognizeCDATA","oncdatastart","oncdataend","onerror","err","reset","onreset","parseComplete","write","chunk","pause","resume","parseChunk","done","decode_codepoint_1","entities_json_1","legacy_json_1","xml_json_1","whitespace","c","isASCIIAlpha","ifElseState","upper","SUCCESS","FAILURE","lower","_state","_index","consumeSpecialNameChar","NEXT_STATE","stateBeforeCdata1","stateBeforeCdata2","stateBeforeCdata3","stateBeforeCdata4","stateBeforeCdata5","stateBeforeScript1","stateBeforeScript2","stateBeforeScript3","stateBeforeScript4","stateAfterScript1","stateAfterScript2","stateAfterScript3","stateAfterScript4","stateBeforeStyle1","stateBeforeStyle2","stateBeforeStyle3","stateAfterStyle1","stateAfterStyle2","stateAfterStyle3","stateBeforeSpecialT","stateBeforeTitle1","stateBeforeTitle2","stateBeforeTitle3","stateAfterSpecialTEnd","stateAfterTitle1","stateAfterTitle2","stateAfterTitle3","stateBeforeEntity","stateBeforeNumericEntity","buffer","bufferOffset","baseState","special","running","ended","parse","finish","stateText","getSection","stateBeforeTagName","stateInTagName","emitToken","stateBeforeClosingTagName","stateInClosingTagName","stateAfterClosingTagName","stateBeforeAttributeName","stateInSelfClosingTag","stateInAttributeName","stateAfterAttributeName","stateBeforeAttributeValue","handleInAttributeValue","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","stateInAttributeValueNoQuotes","stateBeforeDeclaration","stateInDeclaration","stateInProcessingInstruction","stateBeforeComment","stateInComment","stateInSpecialComment","substring","stateAfterComment1","stateAfterComment2","stateBeforeCdata6","stateInCdata","stateAfterCdata1","stateAfterCdata2","stateBeforeSpecialS","stateBeforeSpecialSEnd","stateBeforeSpecialLast","stateAfterSpecialLast","sectionStartOffset","parseFixedEntity","entity","emitPartial","parseLegacyEntity","start","stateInNamedEntity","decodeNumericEntity","offset","base","strict","parsed","stateInNumericEntity","stateInHexEntity","cleanup","charAt","handleTrailingData"],"mappings":"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","file":"vendors.htmlparser2.f334c187de83e20542aa.js","sourcesContent":["\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parseFeed = exports.FeedHandler = void 0;\nvar domhandler_1 = __importDefault(require(\"domhandler\"));\nvar DomUtils = __importStar(require(\"domutils\"));\nvar Parser_1 = require(\"./Parser\");\nvar FeedItemMediaMedium;\n(function (FeedItemMediaMedium) {\n    FeedItemMediaMedium[FeedItemMediaMedium[\"image\"] = 0] = \"image\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"audio\"] = 1] = \"audio\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"video\"] = 2] = \"video\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"document\"] = 3] = \"document\";\n    FeedItemMediaMedium[FeedItemMediaMedium[\"executable\"] = 4] = \"executable\";\n})(FeedItemMediaMedium || (FeedItemMediaMedium = {}));\nvar FeedItemMediaExpression;\n(function (FeedItemMediaExpression) {\n    FeedItemMediaExpression[FeedItemMediaExpression[\"sample\"] = 0] = \"sample\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"full\"] = 1] = \"full\";\n    FeedItemMediaExpression[FeedItemMediaExpression[\"nonstop\"] = 2] = \"nonstop\";\n})(FeedItemMediaExpression || (FeedItemMediaExpression = {}));\n// TODO: Consume data as it is coming in\nvar FeedHandler = /** @class */ (function (_super) {\n    __extends(FeedHandler, _super);\n    /**\n     *\n     * @param callback\n     * @param options\n     */\n    function FeedHandler(callback, options) {\n        var _this = this;\n        if (typeof callback === \"object\") {\n            callback = undefined;\n            options = callback;\n        }\n        _this = _super.call(this, callback, options) || this;\n        return _this;\n    }\n    FeedHandler.prototype.onend = function () {\n        var _a, _b;\n        var feed = {};\n        var feedRoot = getOneElement(isValidFeed, this.dom);\n        if (feedRoot) {\n            if (feedRoot.name === \"feed\") {\n                var childs = feedRoot.children;\n                feed.type = \"atom\";\n                addConditionally(feed, \"id\", \"id\", childs);\n                addConditionally(feed, \"title\", \"title\", childs);\n                var href = getAttribute(\"href\", getOneElement(\"link\", childs));\n                if (href) {\n                    feed.link = href;\n                }\n                addConditionally(feed, \"description\", \"subtitle\", childs);\n                var updated = fetch(\"updated\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"email\", childs, true);\n                feed.items = getElements(\"entry\", childs).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"id\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    var href = getAttribute(\"href\", getOneElement(\"link\", children));\n                    if (href) {\n                        entry.link = href;\n                    }\n                    var description = fetch(\"summary\", children) ||\n                        fetch(\"content\", children);\n                    if (description) {\n                        entry.description = description;\n                    }\n                    var pubDate = fetch(\"updated\", children);\n                    if (pubDate) {\n                        entry.pubDate = new Date(pubDate);\n                    }\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n            else {\n                var childs = (_b = (_a = getOneElement(\"channel\", feedRoot.children)) === null || _a === void 0 ? void 0 : _a.children) !== null && _b !== void 0 ? _b : [];\n                feed.type = feedRoot.name.substr(0, 3);\n                feed.id = \"\";\n                addConditionally(feed, \"title\", \"title\", childs);\n                addConditionally(feed, \"link\", \"link\", childs);\n                addConditionally(feed, \"description\", \"description\", childs);\n                var updated = fetch(\"lastBuildDate\", childs);\n                if (updated) {\n                    feed.updated = new Date(updated);\n                }\n                addConditionally(feed, \"author\", \"managingEditor\", childs, true);\n                feed.items = getElements(\"item\", feedRoot.children).map(function (item) {\n                    var entry = {};\n                    var children = item.children;\n                    addConditionally(entry, \"id\", \"guid\", children);\n                    addConditionally(entry, \"title\", \"title\", children);\n                    addConditionally(entry, \"link\", \"link\", children);\n                    addConditionally(entry, \"description\", \"description\", children);\n                    var pubDate = fetch(\"pubDate\", children);\n                    if (pubDate)\n                        entry.pubDate = new Date(pubDate);\n                    entry.media = getMediaElements(children);\n                    return entry;\n                });\n            }\n        }\n        this.feed = feed;\n        this.handleCallback(feedRoot ? null : Error(\"couldn't find root of feed\"));\n    };\n    return FeedHandler;\n}(domhandler_1.default));\nexports.FeedHandler = FeedHandler;\nfunction getMediaElements(where) {\n    return getElements(\"media:content\", where).map(function (elem) {\n        var media = {\n            medium: elem.attribs.medium,\n            isDefault: !!elem.attribs.isDefault,\n        };\n        if (elem.attribs.url) {\n            media.url = elem.attribs.url;\n        }\n        if (elem.attribs.fileSize) {\n            media.fileSize = parseInt(elem.attribs.fileSize, 10);\n        }\n        if (elem.attribs.type) {\n            media.type = elem.attribs.type;\n        }\n        if (elem.attribs.expression) {\n            media.expression = elem.attribs\n                .expression;\n        }\n        if (elem.attribs.bitrate) {\n            media.bitrate = parseInt(elem.attribs.bitrate, 10);\n        }\n        if (elem.attribs.framerate) {\n            media.framerate = parseInt(elem.attribs.framerate, 10);\n        }\n        if (elem.attribs.samplingrate) {\n            media.samplingrate = parseInt(elem.attribs.samplingrate, 10);\n        }\n        if (elem.attribs.channels) {\n            media.channels = parseInt(elem.attribs.channels, 10);\n        }\n        if (elem.attribs.duration) {\n            media.duration = parseInt(elem.attribs.duration, 10);\n        }\n        if (elem.attribs.height) {\n            media.height = parseInt(elem.attribs.height, 10);\n        }\n        if (elem.attribs.width) {\n            media.width = parseInt(elem.attribs.width, 10);\n        }\n        if (elem.attribs.lang) {\n            media.lang = elem.attribs.lang;\n        }\n        return media;\n    });\n}\nfunction getElements(tagName, where) {\n    return DomUtils.getElementsByTagName(tagName, where, true);\n}\nfunction getOneElement(tagName, node) {\n    return DomUtils.getElementsByTagName(tagName, node, true, 1)[0];\n}\nfunction fetch(tagName, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    return DomUtils.getText(DomUtils.getElementsByTagName(tagName, where, recurse, 1)).trim();\n}\nfunction getAttribute(name, elem) {\n    if (!elem) {\n        return null;\n    }\n    var attribs = elem.attribs;\n    return attribs[name];\n}\nfunction addConditionally(obj, prop, what, where, recurse) {\n    if (recurse === void 0) { recurse = false; }\n    var tmp = fetch(what, where, recurse);\n    if (tmp)\n        obj[prop] = tmp;\n}\nfunction isValidFeed(value) {\n    return value === \"rss\" || value === \"feed\" || value === \"rdf:RDF\";\n}\nvar defaultOptions = { xmlMode: true };\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this option, you probably want to set `xmlMode` to `true`.\n */\nfunction parseFeed(feed, options) {\n    if (options === void 0) { options = defaultOptions; }\n    var handler = new FeedHandler(options);\n    new Parser_1.Parser(handler, options).end(feed);\n    return handler.feed;\n}\nexports.parseFeed = parseFeed;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__exportStar(require(\"./stringify\"), exports);\n__exportStar(require(\"./traversal\"), exports);\n__exportStar(require(\"./manipulation\"), exports);\n__exportStar(require(\"./querying\"), exports);\n__exportStar(require(\"./legacy\"), exports);\n__exportStar(require(\"./helpers\"), exports);\n__exportStar(require(\"./tagtypes\"), exports);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.findAll = exports.existsOne = exports.findOne = exports.findOneChild = exports.find = exports.filter = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Search a node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param node Node to search. Will be included in the result set if it matches.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction filter(test, node, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    if (!Array.isArray(node))\n        node = [node];\n    return find(test, node, recurse, limit);\n}\nexports.filter = filter;\n/**\n * Search an array of node and its children for nodes passing a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes passing `test`.\n */\nfunction find(test, nodes, recurse, limit) {\n    var result = [];\n    for (var _i = 0, nodes_1 = nodes; _i < nodes_1.length; _i++) {\n        var elem = nodes_1[_i];\n        if (test(elem)) {\n            result.push(elem);\n            if (--limit <= 0)\n                break;\n        }\n        if (recurse && tagtypes_1.hasChildren(elem) && elem.children.length > 0) {\n            var children = find(test, elem.children, recurse, limit);\n            result.push.apply(result, children);\n            limit -= children.length;\n            if (limit <= 0)\n                break;\n        }\n    }\n    return result;\n}\nexports.find = find;\n/**\n * Finds the first element inside of an array that matches a test function.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns The first node in the array that passes `test`.\n */\nfunction findOneChild(test, nodes) {\n    return nodes.find(test);\n}\nexports.findOneChild = findOneChild;\n/**\n * Finds one element in a tree that passes a test.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @param recurse Also consider child nodes.\n * @returns The first child node that passes `test`.\n */\nfunction findOne(test, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    var elem = null;\n    for (var i = 0; i < nodes.length && !elem; i++) {\n        var checked = nodes[i];\n        if (!tagtypes_1.isTag(checked)) {\n            continue;\n        }\n        else if (test(checked)) {\n            elem = checked;\n        }\n        else if (recurse && checked.children.length > 0) {\n            elem = findOne(test, checked.children);\n        }\n    }\n    return elem;\n}\nexports.findOne = findOne;\n/**\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns Whether a tree of nodes contains at least one node passing a test.\n */\nfunction existsOne(test, nodes) {\n    return nodes.some(function (checked) {\n        return tagtypes_1.isTag(checked) &&\n            (test(checked) ||\n                (checked.children.length > 0 &&\n                    existsOne(test, checked.children)));\n    });\n}\nexports.existsOne = existsOne;\n/**\n * Search and array of nodes and its children for nodes passing a test function.\n *\n * Same as `find`, only with less options, leading to reduced complexity.\n *\n * @param test Function to test nodes on.\n * @param nodes Array of nodes to search.\n * @returns All nodes passing `test`.\n */\nfunction findAll(test, nodes) {\n    var _a;\n    var result = [];\n    var stack = nodes.filter(tagtypes_1.isTag);\n    var elem;\n    while ((elem = stack.shift())) {\n        var children = (_a = elem.children) === null || _a === void 0 ? void 0 : _a.filter(tagtypes_1.isTag);\n        if (children && children.length > 0) {\n            stack.unshift.apply(stack, children);\n        }\n        if (test(elem))\n            result.push(elem);\n    }\n    return result;\n}\nexports.findAll = findAll;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.hasChildren = exports.isComment = exports.isText = exports.isCDATA = exports.isTag = void 0;\nvar domelementtype_1 = require(\"domelementtype\");\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nfunction isTag(node) {\n    return domelementtype_1.isTag(node);\n}\nexports.isTag = isTag;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren`, `false` otherwise.\n */\nfunction isCDATA(node) {\n    return node.type === \"cdata\" /* CDATA */;\n}\nexports.isCDATA = isCDATA;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isText(node) {\n    return node.type === \"text\" /* Text */;\n}\nexports.isText = isText;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `DataNode`, `false` otherwise.\n */\nfunction isComment(node) {\n    return node.type === \"comment\" /* Comment */;\n}\nexports.isComment = isComment;\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `NodeWithChildren` (has children), `false` otherwise.\n */\nfunction hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\nexports.hasChildren = hasChildren;\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RssHandler = exports.DefaultHandler = exports.DomUtils = exports.ElementType = exports.Tokenizer = exports.createDomStream = exports.parseDOM = exports.DomHandler = exports.Parser = void 0;\nvar Parser_1 = require(\"./Parser\");\nObject.defineProperty(exports, \"Parser\", { enumerable: true, get: function () { return Parser_1.Parser; } });\nvar domhandler_1 = require(\"domhandler\");\nObject.defineProperty(exports, \"DomHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\nObject.defineProperty(exports, \"DefaultHandler\", { enumerable: true, get: function () { return domhandler_1.DomHandler; } });\n// Helper methods\n/**\n * Parses data, returns the resulting DOM.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nfunction parseDOM(data, options) {\n    var handler = new domhandler_1.DomHandler(void 0, options);\n    new Parser_1.Parser(handler, options).end(data);\n    return handler.dom;\n}\nexports.parseDOM = parseDOM;\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param cb A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCb An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nfunction createDomStream(cb, options, elementCb) {\n    var handler = new domhandler_1.DomHandler(cb, options, elementCb);\n    return new Parser_1.Parser(handler, options);\n}\nexports.createDomStream = createDomStream;\nvar Tokenizer_1 = require(\"./Tokenizer\");\nObject.defineProperty(exports, \"Tokenizer\", { enumerable: true, get: function () { return __importDefault(Tokenizer_1).default; } });\nvar ElementType = __importStar(require(\"domelementtype\"));\nexports.ElementType = ElementType;\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\n__exportStar(require(\"./FeedHandler\"), exports);\nexports.DomUtils = __importStar(require(\"domutils\"));\nvar FeedHandler_1 = require(\"./FeedHandler\");\nObject.defineProperty(exports, \"RssHandler\", { enumerable: true, get: function () { return FeedHandler_1.FeedHandler; } });\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getText = exports.getInnerHTML = exports.getOuterHTML = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar dom_serializer_1 = __importDefault(require(\"dom-serializer\"));\n/**\n * @param node Node to get the outer HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s outer HTML.\n */\nfunction getOuterHTML(node, options) {\n    return dom_serializer_1.default(node, options);\n}\nexports.getOuterHTML = getOuterHTML;\n/**\n * @param node Node to get the inner HTML of.\n * @param options Options for serialization.\n * @deprecated Use the `dom-serializer` module directly.\n * @returns `node`'s inner HTML.\n */\nfunction getInnerHTML(node, options) {\n    return tagtypes_1.hasChildren(node)\n        ? node.children.map(function (node) { return getOuterHTML(node, options); }).join(\"\")\n        : \"\";\n}\nexports.getInnerHTML = getInnerHTML;\n/**\n * Get a node's inner text.\n *\n * @param node Node to get the inner text of.\n * @returns `node`'s inner text.\n */\nfunction getText(node) {\n    if (Array.isArray(node))\n        return node.map(getText).join(\"\");\n    if (tagtypes_1.isTag(node))\n        return node.name === \"br\" ? \"\\n\" : getText(node.children);\n    if (tagtypes_1.isCDATA(node))\n        return getText(node.children);\n    if (tagtypes_1.isText(node))\n        return node.data;\n    return \"\";\n}\nexports.getText = getText;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*\n * Module dependencies\n */\nvar ElementType = __importStar(require(\"domelementtype\"));\nvar entities_1 = require(\"entities\");\n/*\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser, see\n * https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nvar foreignNames_1 = require(\"./foreignNames\");\nvar unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    if (!attributes)\n        return;\n    return Object.keys(attributes)\n        .map(function (key) {\n        var _a, _b;\n        var value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = foreignNames_1.attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return key + \"=\\\"\" + (opts.decodeEntities ? entities_1.encodeXML(value) : value.replace(/\"/g, \"&quot;\")) + \"\\\"\";\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nvar singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nfunction render(node, options) {\n    if (options === void 0) { options = {}; }\n    // TODO: This is a bit hacky.\n    var nodes = Array.isArray(node) || node.cheerio ? node : [node];\n    var output = \"\";\n    for (var i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexports.default = render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        case ElementType.Directive:\n        case ElementType.Doctype:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nvar foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = foreignNames_1.elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = __assign(__assign({}, opts), { xmlMode: false });\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = __assign(__assign({}, opts), { xmlMode: \"foreign\" });\n    }\n    var tag = \"<\" + elem.name;\n    var attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += \" \" + attribs;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += \"</\" + elem.name + \">\";\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return \"<\" + elem.data + \">\";\n}\nfunction renderText(elem, opts) {\n    var data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (opts.decodeEntities &&\n        !(elem.parent && unencodedElements.has(elem.parent.name))) {\n        data = entities_1.encodeXML(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return \"<![CDATA[\" + elem.children[0].data + \"]]>\";\n}\nfunction renderComment(elem) {\n    return \"<!--\" + elem.data + \"-->\";\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.attributeNames = exports.elementNames = void 0;\nexports.elementNames = new Map([\n    [\"altglyph\", \"altGlyph\"],\n    [\"altglyphdef\", \"altGlyphDef\"],\n    [\"altglyphitem\", \"altGlyphItem\"],\n    [\"animatecolor\", \"animateColor\"],\n    [\"animatemotion\", \"animateMotion\"],\n    [\"animatetransform\", \"animateTransform\"],\n    [\"clippath\", \"clipPath\"],\n    [\"feblend\", \"feBlend\"],\n    [\"fecolormatrix\", \"feColorMatrix\"],\n    [\"fecomponenttransfer\", \"feComponentTransfer\"],\n    [\"fecomposite\", \"feComposite\"],\n    [\"feconvolvematrix\", \"feConvolveMatrix\"],\n    [\"fediffuselighting\", \"feDiffuseLighting\"],\n    [\"fedisplacementmap\", \"feDisplacementMap\"],\n    [\"fedistantlight\", \"feDistantLight\"],\n    [\"fedropshadow\", \"feDropShadow\"],\n    [\"feflood\", \"feFlood\"],\n    [\"fefunca\", \"feFuncA\"],\n    [\"fefuncb\", \"feFuncB\"],\n    [\"fefuncg\", \"feFuncG\"],\n    [\"fefuncr\", \"feFuncR\"],\n    [\"fegaussianblur\", \"feGaussianBlur\"],\n    [\"feimage\", \"feImage\"],\n    [\"femerge\", \"feMerge\"],\n    [\"femergenode\", \"feMergeNode\"],\n    [\"femorphology\", \"feMorphology\"],\n    [\"feoffset\", \"feOffset\"],\n    [\"fepointlight\", \"fePointLight\"],\n    [\"fespecularlighting\", \"feSpecularLighting\"],\n    [\"fespotlight\", \"feSpotLight\"],\n    [\"fetile\", \"feTile\"],\n    [\"feturbulence\", \"feTurbulence\"],\n    [\"foreignobject\", \"foreignObject\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"lineargradient\", \"linearGradient\"],\n    [\"radialgradient\", \"radialGradient\"],\n    [\"textpath\", \"textPath\"],\n]);\nexports.attributeNames = new Map([\n    [\"definitionurl\", \"definitionURL\"],\n    [\"attributename\", \"attributeName\"],\n    [\"attributetype\", \"attributeType\"],\n    [\"basefrequency\", \"baseFrequency\"],\n    [\"baseprofile\", \"baseProfile\"],\n    [\"calcmode\", \"calcMode\"],\n    [\"clippathunits\", \"clipPathUnits\"],\n    [\"diffuseconstant\", \"diffuseConstant\"],\n    [\"edgemode\", \"edgeMode\"],\n    [\"filterunits\", \"filterUnits\"],\n    [\"glyphref\", \"glyphRef\"],\n    [\"gradienttransform\", \"gradientTransform\"],\n    [\"gradientunits\", \"gradientUnits\"],\n    [\"kernelmatrix\", \"kernelMatrix\"],\n    [\"kernelunitlength\", \"kernelUnitLength\"],\n    [\"keypoints\", \"keyPoints\"],\n    [\"keysplines\", \"keySplines\"],\n    [\"keytimes\", \"keyTimes\"],\n    [\"lengthadjust\", \"lengthAdjust\"],\n    [\"limitingconeangle\", \"limitingConeAngle\"],\n    [\"markerheight\", \"markerHeight\"],\n    [\"markerunits\", \"markerUnits\"],\n    [\"markerwidth\", \"markerWidth\"],\n    [\"maskcontentunits\", \"maskContentUnits\"],\n    [\"maskunits\", \"maskUnits\"],\n    [\"numoctaves\", \"numOctaves\"],\n    [\"pathlength\", \"pathLength\"],\n    [\"patterncontentunits\", \"patternContentUnits\"],\n    [\"patterntransform\", \"patternTransform\"],\n    [\"patternunits\", \"patternUnits\"],\n    [\"pointsatx\", \"pointsAtX\"],\n    [\"pointsaty\", \"pointsAtY\"],\n    [\"pointsatz\", \"pointsAtZ\"],\n    [\"preservealpha\", \"preserveAlpha\"],\n    [\"preserveaspectratio\", \"preserveAspectRatio\"],\n    [\"primitiveunits\", \"primitiveUnits\"],\n    [\"refx\", \"refX\"],\n    [\"refy\", \"refY\"],\n    [\"repeatcount\", \"repeatCount\"],\n    [\"repeatdur\", \"repeatDur\"],\n    [\"requiredextensions\", \"requiredExtensions\"],\n    [\"requiredfeatures\", \"requiredFeatures\"],\n    [\"specularconstant\", \"specularConstant\"],\n    [\"specularexponent\", \"specularExponent\"],\n    [\"spreadmethod\", \"spreadMethod\"],\n    [\"startoffset\", \"startOffset\"],\n    [\"stddeviation\", \"stdDeviation\"],\n    [\"stitchtiles\", \"stitchTiles\"],\n    [\"surfacescale\", \"surfaceScale\"],\n    [\"systemlanguage\", \"systemLanguage\"],\n    [\"tablevalues\", \"tableValues\"],\n    [\"targetx\", \"targetX\"],\n    [\"targety\", \"targetY\"],\n    [\"textlength\", \"textLength\"],\n    [\"viewbox\", \"viewBox\"],\n    [\"viewtarget\", \"viewTarget\"],\n    [\"xchannelselector\", \"xChannelSelector\"],\n    [\"ychannelselector\", \"yChannelSelector\"],\n    [\"zoomandpan\", \"zoomAndPan\"],\n]);\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.nextElementSibling = exports.getName = exports.hasAttrib = exports.getAttributeValue = exports.getSiblings = exports.getParent = exports.getChildren = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\nvar emptyArray = [];\n/**\n * Get a node's children.\n *\n * @param elem Node to get the children of.\n * @returns `elem`'s children, or an empty array.\n */\nfunction getChildren(elem) {\n    var _a;\n    return (_a = elem.children) !== null && _a !== void 0 ? _a : emptyArray;\n}\nexports.getChildren = getChildren;\n/**\n * Get a node's parent.\n *\n * @param elem Node to get the parent of.\n * @returns `elem`'s parent node.\n */\nfunction getParent(elem) {\n    return elem.parent || null;\n}\nexports.getParent = getParent;\n/**\n * Gets an elements siblings, including the element itself.\n *\n * Attempts to get the children through the element's parent first.\n * If we don't have a parent (the element is a root node),\n * we walk the element's `prev` & `next` to get all remaining nodes.\n *\n * @param elem Element to get the siblings of.\n * @returns `elem`'s siblings.\n */\nfunction getSiblings(elem) {\n    var _a, _b;\n    var parent = getParent(elem);\n    if (parent != null)\n        return getChildren(parent);\n    var siblings = [elem];\n    var prev = elem.prev, next = elem.next;\n    while (prev != null) {\n        siblings.unshift(prev);\n        (_a = prev, prev = _a.prev);\n    }\n    while (next != null) {\n        siblings.push(next);\n        (_b = next, next = _b.next);\n    }\n    return siblings;\n}\nexports.getSiblings = getSiblings;\n/**\n * Gets an attribute from an element.\n *\n * @param elem Element to check.\n * @param name Attribute name to retrieve.\n * @returns The element's attribute value, or `undefined`.\n */\nfunction getAttributeValue(elem, name) {\n    var _a;\n    return (_a = elem.attribs) === null || _a === void 0 ? void 0 : _a[name];\n}\nexports.getAttributeValue = getAttributeValue;\n/**\n * Checks whether an element has an attribute.\n *\n * @param elem Element to check.\n * @param name Attribute name to look for.\n * @returns Returns whether `elem` has the attribute `name`.\n */\nfunction hasAttrib(elem, name) {\n    return (elem.attribs != null &&\n        Object.prototype.hasOwnProperty.call(elem.attribs, name) &&\n        elem.attribs[name] != null);\n}\nexports.hasAttrib = hasAttrib;\n/**\n * Get the tag name of an element.\n *\n * @param elem The element to get the name for.\n * @returns The tag name of `elem`.\n */\nfunction getName(elem) {\n    return elem.name;\n}\nexports.getName = getName;\n/**\n * Returns the next element sibling of a node.\n *\n * @param elem The element to get the next sibling of.\n * @returns `elem`'s next sibling that is a tag.\n */\nfunction nextElementSibling(elem) {\n    var _a;\n    var next = elem.next;\n    while (next !== null && !tagtypes_1.isTag(next))\n        (_a = next, next = _a.next);\n    return next;\n}\nexports.nextElementSibling = nextElementSibling;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.prepend = exports.prependChild = exports.append = exports.appendChild = exports.replaceElement = exports.removeElement = void 0;\n/**\n * Remove an element from the dom\n *\n * @param elem The element to be removed\n */\nfunction removeElement(elem) {\n    if (elem.prev)\n        elem.prev.next = elem.next;\n    if (elem.next)\n        elem.next.prev = elem.prev;\n    if (elem.parent) {\n        var childs = elem.parent.children;\n        childs.splice(childs.lastIndexOf(elem), 1);\n    }\n}\nexports.removeElement = removeElement;\n/**\n * Replace an element in the dom\n *\n * @param elem The element to be replaced\n * @param replacement The element to be added\n */\nfunction replaceElement(elem, replacement) {\n    var prev = (replacement.prev = elem.prev);\n    if (prev) {\n        prev.next = replacement;\n    }\n    var next = (replacement.next = elem.next);\n    if (next) {\n        next.prev = replacement;\n    }\n    var parent = (replacement.parent = elem.parent);\n    if (parent) {\n        var childs = parent.children;\n        childs[childs.lastIndexOf(elem)] = replacement;\n    }\n}\nexports.replaceElement = replaceElement;\n/**\n * Append a child to an element.\n *\n * @param elem The element to append to.\n * @param child The element to be added as a child.\n */\nfunction appendChild(elem, child) {\n    removeElement(child);\n    child.next = null;\n    child.parent = elem;\n    if (elem.children.push(child) > 1) {\n        var sibling = elem.children[elem.children.length - 2];\n        sibling.next = child;\n        child.prev = sibling;\n    }\n    else {\n        child.prev = null;\n    }\n}\nexports.appendChild = appendChild;\n/**\n * Append an element after another.\n *\n * @param elem The element to append after.\n * @param next The element be added.\n */\nfunction append(elem, next) {\n    removeElement(next);\n    var parent = elem.parent;\n    var currNext = elem.next;\n    next.next = currNext;\n    next.prev = elem;\n    elem.next = next;\n    next.parent = parent;\n    if (currNext) {\n        currNext.prev = next;\n        if (parent) {\n            var childs = parent.children;\n            childs.splice(childs.lastIndexOf(currNext), 0, next);\n        }\n    }\n    else if (parent) {\n        parent.children.push(next);\n    }\n}\nexports.append = append;\n/**\n * Prepend a child to an element.\n *\n * @param elem The element to prepend before.\n * @param child The element to be added as a child.\n */\nfunction prependChild(elem, child) {\n    removeElement(child);\n    child.parent = elem;\n    child.prev = null;\n    if (elem.children.unshift(child) !== 1) {\n        var sibling = elem.children[1];\n        sibling.prev = child;\n        child.next = sibling;\n    }\n    else {\n        child.next = null;\n    }\n}\nexports.prependChild = prependChild;\n/**\n * Prepend an element before another.\n *\n * @param elem The element to prepend before.\n * @param prev The element be added.\n */\nfunction prepend(elem, prev) {\n    removeElement(prev);\n    var parent = elem.parent;\n    if (parent) {\n        var childs = parent.children;\n        childs.splice(childs.indexOf(elem), 0, prev);\n    }\n    if (elem.prev) {\n        elem.prev.next = prev;\n    }\n    prev.parent = parent;\n    prev.prev = elem.prev;\n    prev.next = elem;\n    elem.prev = prev;\n}\nexports.prepend = prepend;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getElementsByTagType = exports.getElementsByTagName = exports.getElementById = exports.getElements = exports.testElement = void 0;\nvar querying_1 = require(\"./querying\");\nvar tagtypes_1 = require(\"./tagtypes\");\nvar Checks = {\n    tag_name: function (name) {\n        if (typeof name === \"function\") {\n            return function (elem) { return tagtypes_1.isTag(elem) && name(elem.name); };\n        }\n        else if (name === \"*\") {\n            return tagtypes_1.isTag;\n        }\n        return function (elem) { return tagtypes_1.isTag(elem) && elem.name === name; };\n    },\n    tag_type: function (type) {\n        if (typeof type === \"function\") {\n            return function (elem) { return type(elem.type); };\n        }\n        return function (elem) { return elem.type === type; };\n    },\n    tag_contains: function (data) {\n        if (typeof data === \"function\") {\n            return function (elem) { return tagtypes_1.isText(elem) && data(elem.data); };\n        }\n        return function (elem) { return tagtypes_1.isText(elem) && elem.data === data; };\n    },\n};\n/**\n * @param attrib Attribute to check.\n * @param value Attribute value to look for.\n * @returns A function to check whether the a node has an attribute with a particular value.\n */\nfunction getAttribCheck(attrib, value) {\n    if (typeof value === \"function\") {\n        return function (elem) { return tagtypes_1.isTag(elem) && value(elem.attribs[attrib]); };\n    }\n    return function (elem) { return tagtypes_1.isTag(elem) && elem.attribs[attrib] === value; };\n}\n/**\n * @param a First function to combine.\n * @param b Second function to combine.\n * @returns A function taking a node and returning `true` if either\n * of the input functions returns `true` for the node.\n */\nfunction combineFuncs(a, b) {\n    return function (elem) { return a(elem) || b(elem); };\n}\n/**\n * @param options An object describing nodes to look for.\n * @returns A function executing all checks in `options` and returning `true`\n * if any of them match a node.\n */\nfunction compileTest(options) {\n    var funcs = Object.keys(options).map(function (key) {\n        var value = options[key];\n        return key in Checks\n            ? Checks[key](value)\n            : getAttribCheck(key, value);\n    });\n    return funcs.length === 0 ? null : funcs.reduce(combineFuncs);\n}\n/**\n * @param options An object describing nodes to look for.\n * @param node The element to test.\n * @returns Whether the element matches the description in `options`.\n */\nfunction testElement(options, node) {\n    var test = compileTest(options);\n    return test ? test(node) : true;\n}\nexports.testElement = testElement;\n/**\n * @param options An object describing nodes to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes that match `options`.\n */\nfunction getElements(options, nodes, recurse, limit) {\n    if (limit === void 0) { limit = Infinity; }\n    var test = compileTest(options);\n    return test ? querying_1.filter(test, nodes, recurse, limit) : [];\n}\nexports.getElements = getElements;\n/**\n * @param id The unique ID attribute value to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @returns The node with the supplied ID.\n */\nfunction getElementById(id, nodes, recurse) {\n    if (recurse === void 0) { recurse = true; }\n    if (!Array.isArray(nodes))\n        nodes = [nodes];\n    return querying_1.findOne(getAttribCheck(\"id\", id), nodes, recurse);\n}\nexports.getElementById = getElementById;\n/**\n * @param tagName Tag name to search for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `tagName`.\n */\nfunction getElementsByTagName(tagName, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_name(tagName), nodes, recurse, limit);\n}\nexports.getElementsByTagName = getElementsByTagName;\n/**\n * @param type Element type to look for.\n * @param nodes Nodes to search through.\n * @param recurse Also consider child nodes.\n * @param limit Maximum number of nodes to return.\n * @returns All nodes with the supplied `type`.\n */\nfunction getElementsByTagType(type, nodes, recurse, limit) {\n    if (recurse === void 0) { recurse = true; }\n    if (limit === void 0) { limit = Infinity; }\n    return querying_1.filter(Checks.tag_type(type), nodes, recurse, limit);\n}\nexports.getElementsByTagType = getElementsByTagType;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.uniqueSort = exports.compareDocumentPosition = exports.removeSubsets = void 0;\nvar tagtypes_1 = require(\"./tagtypes\");\n/**\n * Given an array of nodes, remove any member that is contained by another.\n *\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't subtrees of each other.\n */\nfunction removeSubsets(nodes) {\n    var idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        var node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (var ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\nexports.removeSubsets = removeSubsets;\n/**\n * Compare the position of one node against another node in any other document.\n * The return value is a bitmask with the following values:\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent./\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nfunction compareDocumentPosition(nodeA, nodeB) {\n    var aParents = [];\n    var bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    var current = tagtypes_1.hasChildren(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = tagtypes_1.hasChildren(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    var maxIdx = Math.min(aParents.length, bParents.length);\n    var idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return 1 /* DISCONNECTED */;\n    }\n    var sharedParent = aParents[idx - 1];\n    var siblings = sharedParent.children;\n    var aSibling = aParents[idx];\n    var bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return 4 /* FOLLOWING */ | 16 /* CONTAINED_BY */;\n        }\n        return 4 /* FOLLOWING */;\n    }\n    if (sharedParent === nodeA) {\n        return 2 /* PRECEDING */ | 8 /* CONTAINS */;\n    }\n    return 2 /* PRECEDING */;\n}\nexports.compareDocumentPosition = compareDocumentPosition;\n/**\n * Sort an array of nodes based on their relative position in the document and\n * remove any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nfunction uniqueSort(nodes) {\n    nodes = nodes.filter(function (node, i, arr) { return !arr.includes(node, i + 1); });\n    nodes.sort(function (a, b) {\n        var relative = compareDocumentPosition(a, b);\n        if (relative & 2 /* PRECEDING */) {\n            return -1;\n        }\n        else if (relative & 4 /* FOLLOWING */) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\nexports.uniqueSort = uniqueSort;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Parser = void 0;\nvar Tokenizer_1 = __importDefault(require(\"./Tokenizer\"));\nvar formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nvar pTag = new Set([\"p\"]);\nvar openImpliesClose = {\n    tr: new Set([\"tr\", \"th\", \"td\"]),\n    th: new Set([\"th\"]),\n    td: new Set([\"thead\", \"th\", \"td\"]),\n    body: new Set([\"head\", \"link\", \"script\"]),\n    li: new Set([\"li\"]),\n    p: pTag,\n    h1: pTag,\n    h2: pTag,\n    h3: pTag,\n    h4: pTag,\n    h5: pTag,\n    h6: pTag,\n    select: formTags,\n    input: formTags,\n    output: formTags,\n    button: formTags,\n    datalist: formTags,\n    textarea: formTags,\n    option: new Set([\"option\"]),\n    optgroup: new Set([\"optgroup\", \"option\"]),\n    dd: new Set([\"dt\", \"dd\"]),\n    dt: new Set([\"dt\", \"dd\"]),\n    address: pTag,\n    article: pTag,\n    aside: pTag,\n    blockquote: pTag,\n    details: pTag,\n    div: pTag,\n    dl: pTag,\n    fieldset: pTag,\n    figcaption: pTag,\n    figure: pTag,\n    footer: pTag,\n    form: pTag,\n    header: pTag,\n    hr: pTag,\n    main: pTag,\n    nav: pTag,\n    ol: pTag,\n    pre: pTag,\n    section: pTag,\n    table: pTag,\n    ul: pTag,\n    rt: new Set([\"rt\", \"rp\"]),\n    rp: new Set([\"rt\", \"rp\"]),\n    tbody: new Set([\"thead\", \"tbody\"]),\n    tfoot: new Set([\"thead\", \"tbody\"]),\n};\nvar voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nvar foreignContextElements = new Set([\"math\", \"svg\"]);\nvar htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nvar reNameEnd = /\\s|\\//;\nvar Parser = /** @class */ (function () {\n    function Parser(cbs, options) {\n        if (options === void 0) { options = {}; }\n        var _a, _b, _c, _d, _e;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = null;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.options = options;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames = (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer_1.default)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    Parser.prototype.updatePosition = function (initialOffset) {\n        if (this.endIndex === null) {\n            if (this.tokenizer.sectionStart <= initialOffset) {\n                this.startIndex = 0;\n            }\n            else {\n                this.startIndex = this.tokenizer.sectionStart - initialOffset;\n            }\n        }\n        else {\n            this.startIndex = this.endIndex + 1;\n        }\n        this.endIndex = this.tokenizer.getAbsoluteIndex();\n    };\n    // Tokenizer event handlers\n    Parser.prototype.ontext = function (data) {\n        var _a, _b;\n        this.updatePosition(1);\n        this.endIndex--;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n    };\n    Parser.prototype.onopentagname = function (name) {\n        var _a, _b;\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.tagname = name;\n        if (!this.options.xmlMode &&\n            Object.prototype.hasOwnProperty.call(openImpliesClose, name)) {\n            var el = void 0;\n            while (this.stack.length > 0 &&\n                openImpliesClose[name].has((el = this.stack[this.stack.length - 1]))) {\n                this.onclosetag(el);\n            }\n        }\n        if (this.options.xmlMode || !voidElements.has(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    };\n    Parser.prototype.onopentagend = function () {\n        var _a, _b;\n        this.updatePosition(1);\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs);\n            this.attribs = null;\n        }\n        if (!this.options.xmlMode &&\n            this.cbs.onclosetag &&\n            voidElements.has(this.tagname)) {\n            this.cbs.onclosetag(this.tagname);\n        }\n        this.tagname = \"\";\n    };\n    Parser.prototype.onclosetag = function (name) {\n        this.updatePosition(1);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (this.stack.length &&\n            (this.options.xmlMode || !voidElements.has(name))) {\n            var pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    pos = this.stack.length - pos;\n                    while (pos--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop());\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (name === \"p\" && !this.options.xmlMode) {\n                this.onopentagname(name);\n                this.closeCurrentTag();\n            }\n        }\n        else if (!this.options.xmlMode && (name === \"br\" || name === \"p\")) {\n            this.onopentagname(name);\n            this.closeCurrentTag();\n        }\n    };\n    Parser.prototype.onselfclosingtag = function () {\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag();\n        }\n        else {\n            this.onopentagend();\n        }\n    };\n    Parser.prototype.closeCurrentTag = function () {\n        var _a, _b;\n        var name = this.tagname;\n        this.onopentagend();\n        /*\n         * Self-closing tags will be on the top of the stack\n         * (cheaper check than in onclosetag)\n         */\n        if (this.stack[this.stack.length - 1] === name) {\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name);\n            this.stack.pop();\n        }\n    };\n    Parser.prototype.onattribname = function (name) {\n        if (this.lowerCaseAttributeNames) {\n            name = name.toLowerCase();\n        }\n        this.attribname = name;\n    };\n    Parser.prototype.onattribdata = function (value) {\n        this.attribvalue += value;\n    };\n    Parser.prototype.onattribend = function (quote) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n    };\n    Parser.prototype.getInstructionName = function (value) {\n        var idx = value.search(reNameEnd);\n        var name = idx < 0 ? value : value.substr(0, idx);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    };\n    Parser.prototype.ondeclaration = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_1 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"!\" + name_1, \"!\" + value);\n        }\n    };\n    Parser.prototype.onprocessinginstruction = function (value) {\n        if (this.cbs.onprocessinginstruction) {\n            var name_2 = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(\"?\" + name_2, \"?\" + value);\n        }\n    };\n    Parser.prototype.oncomment = function (value) {\n        var _a, _b, _c, _d;\n        this.updatePosition(4);\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, value);\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n    };\n    Parser.prototype.oncdata = function (value) {\n        var _a, _b, _c, _d, _e, _f;\n        this.updatePosition(1);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            this.oncomment(\"[CDATA[\" + value + \"]]\");\n        }\n    };\n    Parser.prototype.onerror = function (err) {\n        var _a, _b;\n        (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, err);\n    };\n    Parser.prototype.onend = function () {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            for (var i = this.stack.length; i > 0; this.cbs.onclosetag(this.stack[--i]))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    Parser.prototype.reset = function () {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack = [];\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n    };\n    /**\n     * Parses a complete document and pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    Parser.prototype.parseComplete = function (data) {\n        this.reset();\n        this.end(data);\n    };\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    Parser.prototype.write = function (chunk) {\n        this.tokenizer.write(chunk);\n    };\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    Parser.prototype.end = function (chunk) {\n        this.tokenizer.end(chunk);\n    };\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    Parser.prototype.pause = function () {\n        this.tokenizer.pause();\n    };\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    Parser.prototype.resume = function () {\n        this.tokenizer.resume();\n    };\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.parseChunk = function (chunk) {\n        this.write(chunk);\n    };\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    Parser.prototype.done = function (chunk) {\n        this.end(chunk);\n    };\n    return Parser;\n}());\nexports.Parser = Parser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar decode_codepoint_1 = __importDefault(require(\"entities/lib/decode_codepoint\"));\nvar entities_json_1 = __importDefault(require(\"entities/lib/maps/entities.json\"));\nvar legacy_json_1 = __importDefault(require(\"entities/lib/maps/legacy.json\"));\nvar xml_json_1 = __importDefault(require(\"entities/lib/maps/xml.json\"));\nfunction whitespace(c) {\n    return c === \" \" || c === \"\\n\" || c === \"\\t\" || c === \"\\f\" || c === \"\\r\";\n}\nfunction isASCIIAlpha(c) {\n    return (c >= \"a\" && c <= \"z\") || (c >= \"A\" && c <= \"Z\");\n}\nfunction ifElseState(upper, SUCCESS, FAILURE) {\n    var lower = upper.toLowerCase();\n    if (upper === lower) {\n        return function (t, c) {\n            if (c === lower) {\n                t._state = SUCCESS;\n            }\n            else {\n                t._state = FAILURE;\n                t._index--;\n            }\n        };\n    }\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = SUCCESS;\n        }\n        else {\n            t._state = FAILURE;\n            t._index--;\n        }\n    };\n}\nfunction consumeSpecialNameChar(upper, NEXT_STATE) {\n    var lower = upper.toLowerCase();\n    return function (t, c) {\n        if (c === lower || c === upper) {\n            t._state = NEXT_STATE;\n        }\n        else {\n            t._state = 3 /* InTagName */;\n            t._index--; // Consume the token again\n        }\n    };\n}\nvar stateBeforeCdata1 = ifElseState(\"C\", 24 /* BeforeCdata2 */, 16 /* InDeclaration */);\nvar stateBeforeCdata2 = ifElseState(\"D\", 25 /* BeforeCdata3 */, 16 /* InDeclaration */);\nvar stateBeforeCdata3 = ifElseState(\"A\", 26 /* BeforeCdata4 */, 16 /* InDeclaration */);\nvar stateBeforeCdata4 = ifElseState(\"T\", 27 /* BeforeCdata5 */, 16 /* InDeclaration */);\nvar stateBeforeCdata5 = ifElseState(\"A\", 28 /* BeforeCdata6 */, 16 /* InDeclaration */);\nvar stateBeforeScript1 = consumeSpecialNameChar(\"R\", 35 /* BeforeScript2 */);\nvar stateBeforeScript2 = consumeSpecialNameChar(\"I\", 36 /* BeforeScript3 */);\nvar stateBeforeScript3 = consumeSpecialNameChar(\"P\", 37 /* BeforeScript4 */);\nvar stateBeforeScript4 = consumeSpecialNameChar(\"T\", 38 /* BeforeScript5 */);\nvar stateAfterScript1 = ifElseState(\"R\", 40 /* AfterScript2 */, 1 /* Text */);\nvar stateAfterScript2 = ifElseState(\"I\", 41 /* AfterScript3 */, 1 /* Text */);\nvar stateAfterScript3 = ifElseState(\"P\", 42 /* AfterScript4 */, 1 /* Text */);\nvar stateAfterScript4 = ifElseState(\"T\", 43 /* AfterScript5 */, 1 /* Text */);\nvar stateBeforeStyle1 = consumeSpecialNameChar(\"Y\", 45 /* BeforeStyle2 */);\nvar stateBeforeStyle2 = consumeSpecialNameChar(\"L\", 46 /* BeforeStyle3 */);\nvar stateBeforeStyle3 = consumeSpecialNameChar(\"E\", 47 /* BeforeStyle4 */);\nvar stateAfterStyle1 = ifElseState(\"Y\", 49 /* AfterStyle2 */, 1 /* Text */);\nvar stateAfterStyle2 = ifElseState(\"L\", 50 /* AfterStyle3 */, 1 /* Text */);\nvar stateAfterStyle3 = ifElseState(\"E\", 51 /* AfterStyle4 */, 1 /* Text */);\nvar stateBeforeSpecialT = consumeSpecialNameChar(\"I\", 54 /* BeforeTitle1 */);\nvar stateBeforeTitle1 = consumeSpecialNameChar(\"T\", 55 /* BeforeTitle2 */);\nvar stateBeforeTitle2 = consumeSpecialNameChar(\"L\", 56 /* BeforeTitle3 */);\nvar stateBeforeTitle3 = consumeSpecialNameChar(\"E\", 57 /* BeforeTitle4 */);\nvar stateAfterSpecialTEnd = ifElseState(\"I\", 58 /* AfterTitle1 */, 1 /* Text */);\nvar stateAfterTitle1 = ifElseState(\"T\", 59 /* AfterTitle2 */, 1 /* Text */);\nvar stateAfterTitle2 = ifElseState(\"L\", 60 /* AfterTitle3 */, 1 /* Text */);\nvar stateAfterTitle3 = ifElseState(\"E\", 61 /* AfterTitle4 */, 1 /* Text */);\nvar stateBeforeEntity = ifElseState(\"#\", 63 /* BeforeNumericEntity */, 64 /* InNamedEntity */);\nvar stateBeforeNumericEntity = ifElseState(\"X\", 66 /* InHexEntity */, 65 /* InNumericEntity */);\nvar Tokenizer = /** @class */ (function () {\n    function Tokenizer(options, cbs) {\n        var _a;\n        /** The current state the tokenizer is in. */\n        this._state = 1 /* Text */;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this._index = 0;\n        /**\n         * Data that has already been processed will be removed from the buffer occasionally.\n         * `_bufferOffset` keeps track of how many characters have been removed, to make sure position information is accurate.\n         */\n        this.bufferOffset = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = 1 /* Text */;\n        /** For special parsing behavior inside of script and style tags. */\n        this.special = 1 /* None */;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** Indicates whether the tokenizer has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs;\n        this.xmlMode = !!(options === null || options === void 0 ? void 0 : options.xmlMode);\n        this.decodeEntities = (_a = options === null || options === void 0 ? void 0 : options.decodeEntities) !== null && _a !== void 0 ? _a : true;\n    }\n    Tokenizer.prototype.reset = function () {\n        this._state = 1 /* Text */;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this._index = 0;\n        this.bufferOffset = 0;\n        this.baseState = 1 /* Text */;\n        this.special = 1 /* None */;\n        this.running = true;\n        this.ended = false;\n    };\n    Tokenizer.prototype.write = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".write() after done!\"));\n        this.buffer += chunk;\n        this.parse();\n    };\n    Tokenizer.prototype.end = function (chunk) {\n        if (this.ended)\n            this.cbs.onerror(Error(\".end() after done!\"));\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        if (this.running)\n            this.finish();\n    };\n    Tokenizer.prototype.pause = function () {\n        this.running = false;\n    };\n    Tokenizer.prototype.resume = function () {\n        this.running = true;\n        if (this._index < this.buffer.length) {\n            this.parse();\n        }\n        if (this.ended) {\n            this.finish();\n        }\n    };\n    /**\n     * The current index within all of the written data.\n     */\n    Tokenizer.prototype.getAbsoluteIndex = function () {\n        return this.bufferOffset + this._index;\n    };\n    Tokenizer.prototype.stateText = function (c) {\n        if (c === \"<\") {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this._state = 2 /* BeforeTagName */;\n            this.sectionStart = this._index;\n        }\n        else if (this.decodeEntities &&\n            c === \"&\" &&\n            (this.special === 1 /* None */ || this.special === 4 /* Title */)) {\n            if (this._index > this.sectionStart) {\n                this.cbs.ontext(this.getSection());\n            }\n            this.baseState = 1 /* Text */;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeTagName = function (c) {\n        if (c === \"/\") {\n            this._state = 5 /* BeforeClosingTagName */;\n        }\n        else if (c === \"<\") {\n            this.cbs.ontext(this.getSection());\n            this.sectionStart = this._index;\n        }\n        else if (c === \">\" ||\n            this.special !== 1 /* None */ ||\n            whitespace(c)) {\n            this._state = 1 /* Text */;\n        }\n        else if (c === \"!\") {\n            this._state = 15 /* BeforeDeclaration */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"?\") {\n            this._state = 17 /* InProcessingInstruction */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 1 /* Text */;\n        }\n        else {\n            this._state =\n                !this.xmlMode && (c === \"s\" || c === \"S\")\n                    ? 32 /* BeforeSpecialS */\n                    : !this.xmlMode && (c === \"t\" || c === \"T\")\n                        ? 52 /* BeforeSpecialT */\n                        : 3 /* InTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInTagName = function (c) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.emitToken(\"onopentagname\");\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateBeforeClosingTagName = function (c) {\n        if (whitespace(c)) {\n            // Ignore\n        }\n        else if (c === \">\") {\n            this._state = 1 /* Text */;\n        }\n        else if (this.special !== 1 /* None */) {\n            if (c === \"s\" || c === \"S\") {\n                this._state = 33 /* BeforeSpecialSEnd */;\n            }\n            else if (c === \"t\" || c === \"T\") {\n                this._state = 53 /* BeforeSpecialTEnd */;\n            }\n            else {\n                this._state = 1 /* Text */;\n                this._index--;\n            }\n        }\n        else if (!isASCIIAlpha(c)) {\n            this._state = 20 /* InSpecialComment */;\n            this.sectionStart = this._index;\n        }\n        else {\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInClosingTagName = function (c) {\n        if (c === \">\" || whitespace(c)) {\n            this.emitToken(\"onclosetag\");\n            this._state = 7 /* AfterClosingTagName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterClosingTagName = function (c) {\n        // Skip everything until \">\"\n        if (c === \">\") {\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeName = function (c) {\n        if (c === \">\") {\n            this.cbs.onopentagend();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"/\") {\n            this._state = 4 /* InSelfClosingTag */;\n        }\n        else if (!whitespace(c)) {\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInSelfClosingTag = function (c) {\n        if (c === \">\") {\n            this.cbs.onselfclosingtag();\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n            this.special = 1 /* None */; // Reset special state, in case of self-closing special tags\n        }\n        else if (!whitespace(c)) {\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeName = function (c) {\n        if (c === \"=\" || c === \"/\" || c === \">\" || whitespace(c)) {\n            this.cbs.onattribname(this.getSection());\n            this.sectionStart = -1;\n            this._state = 10 /* AfterAttributeName */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateAfterAttributeName = function (c) {\n        if (c === \"=\") {\n            this._state = 11 /* BeforeAttributeValue */;\n        }\n        else if (c === \"/\" || c === \">\") {\n            this.cbs.onattribend(undefined);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (!whitespace(c)) {\n            this.cbs.onattribend(undefined);\n            this._state = 9 /* InAttributeName */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeAttributeValue = function (c) {\n        if (c === '\"') {\n            this._state = 12 /* InAttributeValueDq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c === \"'\") {\n            this._state = 13 /* InAttributeValueSq */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (!whitespace(c)) {\n            this._state = 14 /* InAttributeValueNq */;\n            this.sectionStart = this._index;\n            this._index--; // Reconsume token\n        }\n    };\n    Tokenizer.prototype.handleInAttributeValue = function (c, quote) {\n        if (c === quote) {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(quote);\n            this._state = 8 /* BeforeAttributeName */;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateInAttributeValueDoubleQuotes = function (c) {\n        this.handleInAttributeValue(c, '\"');\n    };\n    Tokenizer.prototype.stateInAttributeValueSingleQuotes = function (c) {\n        this.handleInAttributeValue(c, \"'\");\n    };\n    Tokenizer.prototype.stateInAttributeValueNoQuotes = function (c) {\n        if (whitespace(c) || c === \">\") {\n            this.emitToken(\"onattribdata\");\n            this.cbs.onattribend(null);\n            this._state = 8 /* BeforeAttributeName */;\n            this._index--;\n        }\n        else if (this.decodeEntities && c === \"&\") {\n            this.emitToken(\"onattribdata\");\n            this.baseState = this._state;\n            this._state = 62 /* BeforeEntity */;\n            this.sectionStart = this._index;\n        }\n    };\n    Tokenizer.prototype.stateBeforeDeclaration = function (c) {\n        this._state =\n            c === \"[\"\n                ? 23 /* BeforeCdata1 */\n                : c === \"-\"\n                    ? 18 /* BeforeComment */\n                    : 16 /* InDeclaration */;\n    };\n    Tokenizer.prototype.stateInDeclaration = function (c) {\n        if (c === \">\") {\n            this.cbs.ondeclaration(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateInProcessingInstruction = function (c) {\n        if (c === \">\") {\n            this.cbs.onprocessinginstruction(this.getSection());\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateBeforeComment = function (c) {\n        if (c === \"-\") {\n            this._state = 19 /* InComment */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n        }\n    };\n    Tokenizer.prototype.stateInComment = function (c) {\n        if (c === \"-\")\n            this._state = 21 /* AfterComment1 */;\n    };\n    Tokenizer.prototype.stateInSpecialComment = function (c) {\n        if (c === \">\") {\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment1 = function (c) {\n        if (c === \"-\") {\n            this._state = 22 /* AfterComment2 */;\n        }\n        else {\n            this._state = 19 /* InComment */;\n        }\n    };\n    Tokenizer.prototype.stateAfterComment2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncomment(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"-\") {\n            this._state = 19 /* InComment */;\n        }\n        // Else: stay in AFTER_COMMENT_2 (`--->`)\n    };\n    Tokenizer.prototype.stateBeforeCdata6 = function (c) {\n        if (c === \"[\") {\n            this._state = 29 /* InCdata */;\n            this.sectionStart = this._index + 1;\n        }\n        else {\n            this._state = 16 /* InDeclaration */;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInCdata = function (c) {\n        if (c === \"]\")\n            this._state = 30 /* AfterCdata1 */;\n    };\n    Tokenizer.prototype.stateAfterCdata1 = function (c) {\n        if (c === \"]\")\n            this._state = 31 /* AfterCdata2 */;\n        else\n            this._state = 29 /* InCdata */;\n    };\n    Tokenizer.prototype.stateAfterCdata2 = function (c) {\n        if (c === \">\") {\n            // Remove 2 trailing chars\n            this.cbs.oncdata(this.buffer.substring(this.sectionStart, this._index - 2));\n            this._state = 1 /* Text */;\n            this.sectionStart = this._index + 1;\n        }\n        else if (c !== \"]\") {\n            this._state = 29 /* InCdata */;\n        }\n        // Else: stay in AFTER_CDATA_2 (`]]]>`)\n    };\n    Tokenizer.prototype.stateBeforeSpecialS = function (c) {\n        if (c === \"c\" || c === \"C\") {\n            this._state = 34 /* BeforeScript1 */;\n        }\n        else if (c === \"t\" || c === \"T\") {\n            this._state = 44 /* BeforeStyle1 */;\n        }\n        else {\n            this._state = 3 /* InTagName */;\n            this._index--; // Consume the token again\n        }\n    };\n    Tokenizer.prototype.stateBeforeSpecialSEnd = function (c) {\n        if (this.special === 2 /* Script */ && (c === \"c\" || c === \"C\")) {\n            this._state = 39 /* AfterScript1 */;\n        }\n        else if (this.special === 3 /* Style */ && (c === \"t\" || c === \"T\")) {\n            this._state = 48 /* AfterStyle1 */;\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    Tokenizer.prototype.stateBeforeSpecialLast = function (c, special) {\n        if (c === \"/\" || c === \">\" || whitespace(c)) {\n            this.special = special;\n        }\n        this._state = 3 /* InTagName */;\n        this._index--; // Consume the token again\n    };\n    Tokenizer.prototype.stateAfterSpecialLast = function (c, sectionStartOffset) {\n        if (c === \">\" || whitespace(c)) {\n            this.special = 1 /* None */;\n            this._state = 6 /* InClosingTagName */;\n            this.sectionStart = this._index - sectionStartOffset;\n            this._index--; // Reconsume the token\n        }\n        else\n            this._state = 1 /* Text */;\n    };\n    // For entities terminated with a semicolon\n    Tokenizer.prototype.parseFixedEntity = function (map) {\n        if (map === void 0) { map = this.xmlMode ? xml_json_1.default : entities_json_1.default; }\n        // Offset = 1\n        if (this.sectionStart + 1 < this._index) {\n            var entity = this.buffer.substring(this.sectionStart + 1, this._index);\n            if (Object.prototype.hasOwnProperty.call(map, entity)) {\n                this.emitPartial(map[entity]);\n                this.sectionStart = this._index + 1;\n            }\n        }\n    };\n    // Parses legacy entities (without trailing semicolon)\n    Tokenizer.prototype.parseLegacyEntity = function () {\n        var start = this.sectionStart + 1;\n        // The max length of legacy entities is 6\n        var limit = Math.min(this._index - start, 6);\n        while (limit >= 2) {\n            // The min length of legacy entities is 2\n            var entity = this.buffer.substr(start, limit);\n            if (Object.prototype.hasOwnProperty.call(legacy_json_1.default, entity)) {\n                this.emitPartial(legacy_json_1.default[entity]);\n                this.sectionStart += limit + 1;\n                return;\n            }\n            limit--;\n        }\n    };\n    Tokenizer.prototype.stateInNamedEntity = function (c) {\n        if (c === \";\") {\n            this.parseFixedEntity();\n            // Retry as legacy entity if entity wasn't parsed\n            if (this.baseState === 1 /* Text */ &&\n                this.sectionStart + 1 < this._index &&\n                !this.xmlMode) {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n        }\n        else if ((c < \"0\" || c > \"9\") && !isASCIIAlpha(c)) {\n            if (this.xmlMode || this.sectionStart + 1 === this._index) {\n                // Ignore\n            }\n            else if (this.baseState !== 1 /* Text */) {\n                if (c !== \"=\") {\n                    // Parse as legacy entity, without allowing additional characters.\n                    this.parseFixedEntity(legacy_json_1.default);\n                }\n            }\n            else {\n                this.parseLegacyEntity();\n            }\n            this._state = this.baseState;\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.decodeNumericEntity = function (offset, base, strict) {\n        var sectionStart = this.sectionStart + offset;\n        if (sectionStart !== this._index) {\n            // Parse entity\n            var entity = this.buffer.substring(sectionStart, this._index);\n            var parsed = parseInt(entity, base);\n            this.emitPartial(decode_codepoint_1.default(parsed));\n            this.sectionStart = strict ? this._index + 1 : this._index;\n        }\n        this._state = this.baseState;\n    };\n    Tokenizer.prototype.stateInNumericEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(2, 10, true);\n        }\n        else if (c < \"0\" || c > \"9\") {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(2, 10, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.stateInHexEntity = function (c) {\n        if (c === \";\") {\n            this.decodeNumericEntity(3, 16, true);\n        }\n        else if ((c < \"a\" || c > \"f\") &&\n            (c < \"A\" || c > \"F\") &&\n            (c < \"0\" || c > \"9\")) {\n            if (!this.xmlMode) {\n                this.decodeNumericEntity(3, 16, false);\n            }\n            else {\n                this._state = this.baseState;\n            }\n            this._index--;\n        }\n    };\n    Tokenizer.prototype.cleanup = function () {\n        if (this.sectionStart < 0) {\n            this.buffer = \"\";\n            this.bufferOffset += this._index;\n            this._index = 0;\n        }\n        else if (this.running) {\n            if (this._state === 1 /* Text */) {\n                if (this.sectionStart !== this._index) {\n                    this.cbs.ontext(this.buffer.substr(this.sectionStart));\n                }\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else if (this.sectionStart === this._index) {\n                // The section just started\n                this.buffer = \"\";\n                this.bufferOffset += this._index;\n                this._index = 0;\n            }\n            else {\n                // Remove everything unnecessary\n                this.buffer = this.buffer.substr(this.sectionStart);\n                this._index -= this.sectionStart;\n                this.bufferOffset += this.sectionStart;\n            }\n            this.sectionStart = 0;\n        }\n    };\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    Tokenizer.prototype.parse = function () {\n        while (this._index < this.buffer.length && this.running) {\n            var c = this.buffer.charAt(this._index);\n            if (this._state === 1 /* Text */) {\n                this.stateText(c);\n            }\n            else if (this._state === 12 /* InAttributeValueDq */) {\n                this.stateInAttributeValueDoubleQuotes(c);\n            }\n            else if (this._state === 9 /* InAttributeName */) {\n                this.stateInAttributeName(c);\n            }\n            else if (this._state === 19 /* InComment */) {\n                this.stateInComment(c);\n            }\n            else if (this._state === 20 /* InSpecialComment */) {\n                this.stateInSpecialComment(c);\n            }\n            else if (this._state === 8 /* BeforeAttributeName */) {\n                this.stateBeforeAttributeName(c);\n            }\n            else if (this._state === 3 /* InTagName */) {\n                this.stateInTagName(c);\n            }\n            else if (this._state === 6 /* InClosingTagName */) {\n                this.stateInClosingTagName(c);\n            }\n            else if (this._state === 2 /* BeforeTagName */) {\n                this.stateBeforeTagName(c);\n            }\n            else if (this._state === 10 /* AfterAttributeName */) {\n                this.stateAfterAttributeName(c);\n            }\n            else if (this._state === 13 /* InAttributeValueSq */) {\n                this.stateInAttributeValueSingleQuotes(c);\n            }\n            else if (this._state === 11 /* BeforeAttributeValue */) {\n                this.stateBeforeAttributeValue(c);\n            }\n            else if (this._state === 5 /* BeforeClosingTagName */) {\n                this.stateBeforeClosingTagName(c);\n            }\n            else if (this._state === 7 /* AfterClosingTagName */) {\n                this.stateAfterClosingTagName(c);\n            }\n            else if (this._state === 32 /* BeforeSpecialS */) {\n                this.stateBeforeSpecialS(c);\n            }\n            else if (this._state === 21 /* AfterComment1 */) {\n                this.stateAfterComment1(c);\n            }\n            else if (this._state === 14 /* InAttributeValueNq */) {\n                this.stateInAttributeValueNoQuotes(c);\n            }\n            else if (this._state === 4 /* InSelfClosingTag */) {\n                this.stateInSelfClosingTag(c);\n            }\n            else if (this._state === 16 /* InDeclaration */) {\n                this.stateInDeclaration(c);\n            }\n            else if (this._state === 15 /* BeforeDeclaration */) {\n                this.stateBeforeDeclaration(c);\n            }\n            else if (this._state === 22 /* AfterComment2 */) {\n                this.stateAfterComment2(c);\n            }\n            else if (this._state === 18 /* BeforeComment */) {\n                this.stateBeforeComment(c);\n            }\n            else if (this._state === 33 /* BeforeSpecialSEnd */) {\n                this.stateBeforeSpecialSEnd(c);\n            }\n            else if (this._state === 53 /* BeforeSpecialTEnd */) {\n                stateAfterSpecialTEnd(this, c);\n            }\n            else if (this._state === 39 /* AfterScript1 */) {\n                stateAfterScript1(this, c);\n            }\n            else if (this._state === 40 /* AfterScript2 */) {\n                stateAfterScript2(this, c);\n            }\n            else if (this._state === 41 /* AfterScript3 */) {\n                stateAfterScript3(this, c);\n            }\n            else if (this._state === 34 /* BeforeScript1 */) {\n                stateBeforeScript1(this, c);\n            }\n            else if (this._state === 35 /* BeforeScript2 */) {\n                stateBeforeScript2(this, c);\n            }\n            else if (this._state === 36 /* BeforeScript3 */) {\n                stateBeforeScript3(this, c);\n            }\n            else if (this._state === 37 /* BeforeScript4 */) {\n                stateBeforeScript4(this, c);\n            }\n            else if (this._state === 38 /* BeforeScript5 */) {\n                this.stateBeforeSpecialLast(c, 2 /* Script */);\n            }\n            else if (this._state === 42 /* AfterScript4 */) {\n                stateAfterScript4(this, c);\n            }\n            else if (this._state === 43 /* AfterScript5 */) {\n                this.stateAfterSpecialLast(c, 6);\n            }\n            else if (this._state === 44 /* BeforeStyle1 */) {\n                stateBeforeStyle1(this, c);\n            }\n            else if (this._state === 29 /* InCdata */) {\n                this.stateInCdata(c);\n            }\n            else if (this._state === 45 /* BeforeStyle2 */) {\n                stateBeforeStyle2(this, c);\n            }\n            else if (this._state === 46 /* BeforeStyle3 */) {\n                stateBeforeStyle3(this, c);\n            }\n            else if (this._state === 47 /* BeforeStyle4 */) {\n                this.stateBeforeSpecialLast(c, 3 /* Style */);\n            }\n            else if (this._state === 48 /* AfterStyle1 */) {\n                stateAfterStyle1(this, c);\n            }\n            else if (this._state === 49 /* AfterStyle2 */) {\n                stateAfterStyle2(this, c);\n            }\n            else if (this._state === 50 /* AfterStyle3 */) {\n                stateAfterStyle3(this, c);\n            }\n            else if (this._state === 51 /* AfterStyle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 52 /* BeforeSpecialT */) {\n                stateBeforeSpecialT(this, c);\n            }\n            else if (this._state === 54 /* BeforeTitle1 */) {\n                stateBeforeTitle1(this, c);\n            }\n            else if (this._state === 55 /* BeforeTitle2 */) {\n                stateBeforeTitle2(this, c);\n            }\n            else if (this._state === 56 /* BeforeTitle3 */) {\n                stateBeforeTitle3(this, c);\n            }\n            else if (this._state === 57 /* BeforeTitle4 */) {\n                this.stateBeforeSpecialLast(c, 4 /* Title */);\n            }\n            else if (this._state === 58 /* AfterTitle1 */) {\n                stateAfterTitle1(this, c);\n            }\n            else if (this._state === 59 /* AfterTitle2 */) {\n                stateAfterTitle2(this, c);\n            }\n            else if (this._state === 60 /* AfterTitle3 */) {\n                stateAfterTitle3(this, c);\n            }\n            else if (this._state === 61 /* AfterTitle4 */) {\n                this.stateAfterSpecialLast(c, 5);\n            }\n            else if (this._state === 17 /* InProcessingInstruction */) {\n                this.stateInProcessingInstruction(c);\n            }\n            else if (this._state === 64 /* InNamedEntity */) {\n                this.stateInNamedEntity(c);\n            }\n            else if (this._state === 23 /* BeforeCdata1 */) {\n                stateBeforeCdata1(this, c);\n            }\n            else if (this._state === 62 /* BeforeEntity */) {\n                stateBeforeEntity(this, c);\n            }\n            else if (this._state === 24 /* BeforeCdata2 */) {\n                stateBeforeCdata2(this, c);\n            }\n            else if (this._state === 25 /* BeforeCdata3 */) {\n                stateBeforeCdata3(this, c);\n            }\n            else if (this._state === 30 /* AfterCdata1 */) {\n                this.stateAfterCdata1(c);\n            }\n            else if (this._state === 31 /* AfterCdata2 */) {\n                this.stateAfterCdata2(c);\n            }\n            else if (this._state === 26 /* BeforeCdata4 */) {\n                stateBeforeCdata4(this, c);\n            }\n            else if (this._state === 27 /* BeforeCdata5 */) {\n                stateBeforeCdata5(this, c);\n            }\n            else if (this._state === 28 /* BeforeCdata6 */) {\n                this.stateBeforeCdata6(c);\n            }\n            else if (this._state === 66 /* InHexEntity */) {\n                this.stateInHexEntity(c);\n            }\n            else if (this._state === 65 /* InNumericEntity */) {\n                this.stateInNumericEntity(c);\n                // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n            }\n            else if (this._state === 63 /* BeforeNumericEntity */) {\n                stateBeforeNumericEntity(this, c);\n            }\n            else {\n                this.cbs.onerror(Error(\"unknown _state\"), this._state);\n            }\n            this._index++;\n        }\n        this.cleanup();\n    };\n    Tokenizer.prototype.finish = function () {\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this._index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    };\n    Tokenizer.prototype.handleTrailingData = function () {\n        var data = this.buffer.substr(this.sectionStart);\n        if (this._state === 29 /* InCdata */ ||\n            this._state === 30 /* AfterCdata1 */ ||\n            this._state === 31 /* AfterCdata2 */) {\n            this.cbs.oncdata(data);\n        }\n        else if (this._state === 19 /* InComment */ ||\n            this._state === 21 /* AfterComment1 */ ||\n            this._state === 22 /* AfterComment2 */) {\n            this.cbs.oncomment(data);\n        }\n        else if (this._state === 64 /* InNamedEntity */ && !this.xmlMode) {\n            this.parseLegacyEntity();\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 65 /* InNumericEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(2, 10, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state === 66 /* InHexEntity */ && !this.xmlMode) {\n            this.decodeNumericEntity(3, 16, false);\n            if (this.sectionStart < this._index) {\n                this._state = this.baseState;\n                this.handleTrailingData();\n            }\n        }\n        else if (this._state !== 3 /* InTagName */ &&\n            this._state !== 8 /* BeforeAttributeName */ &&\n            this._state !== 11 /* BeforeAttributeValue */ &&\n            this._state !== 10 /* AfterAttributeName */ &&\n            this._state !== 9 /* InAttributeName */ &&\n            this._state !== 13 /* InAttributeValueSq */ &&\n            this._state !== 12 /* InAttributeValueDq */ &&\n            this._state !== 14 /* InAttributeValueNq */ &&\n            this._state !== 6 /* InClosingTagName */) {\n            this.cbs.ontext(data);\n        }\n        /*\n         * Else, ignore remaining data\n         * TODO add a way to remove current tag\n         */\n    };\n    Tokenizer.prototype.getSection = function () {\n        return this.buffer.substring(this.sectionStart, this._index);\n    };\n    Tokenizer.prototype.emitToken = function (name) {\n        this.cbs[name](this.getSection());\n        this.sectionStart = -1;\n    };\n    Tokenizer.prototype.emitPartial = function (value) {\n        if (this.baseState !== 1 /* Text */) {\n            this.cbs.onattribdata(value); // TODO implement the new event\n        }\n        else {\n            this.cbs.ontext(value);\n        }\n    };\n    return Tokenizer;\n}());\nexports.default = Tokenizer;\n"],"sourceRoot":""}